<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" /><link rel="stylesheet" href="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/matlab-report-styles.css" type="text/css" /><title>Function details for TrackTwoFlies_GUI_debug2</title><link rel="stylesheet" href="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/matlab-report-styles.css" type="text/css" /></head><body bgcolor="#F8F8F8"><strong>This is a static copy of a profile report</strong><p><a href="file0.html">Home</a><p><span style="font-size:14pt; background:#FFE4B0">TrackTwoFlies_GUI_debug2 (1 call, 4605.080 sec, 349367446.92 Kb, 349292788.09 Kb, 10368.58 Kb)</span><br/><i>Generated 03-Apr-2014 11:11:01 using cpu time.</i><br/>function in file /Users/juan/Documents/janelia/cbtrack_GUI/TrackTwoFlies_GUI_debug2.m<br/>Copy to new window for comparing multiple runs<div class="grayline"/><div class="grayline"/><strong>Parents</strong> (calling functions)<br/><p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Name</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Type</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td></tr><tr><td class="td-linebottomrt"><a href="file39.html">CourtshipBowlTrack_GUI2</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td></tr></table><div class="grayline"/><strong>Lines where the most time was spent</strong><br/> <p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Line Number</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Code</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Total Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Allocated Memory</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Freed Memory</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Peak Memory</td><td class="td-linebottomrt" bgcolor="#F0F0F0">% Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Time Plot</td></tr><tr><td class="td-linebottomrt"><a href="#Line483">483</a></td><td class="td-linebottomrt"><pre>[wingtrx,wingperframedata,~,wi...</pre></td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">4395.579 s</td><td class="td-linebottomrt">348452566.06 Kb</td><td class="td-linebottomrt">348420428.11 Kb</td><td class="td-linebottomrt">9755.05 Kb</td><td class="td-linebottomrt" class="td-linebottomrt">95.5%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=95 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line310">310</a></td><td class="td-linebottomrt"><pre>[idsfit_curr,mudatafit_curr,si...</pre></td><td class="td-linebottomrt">16</td><td class="td-linebottomrt">103.331 s</td><td class="td-linebottomrt">134044.36 Kb</td><td class="td-linebottomrt">133043.77 Kb</td><td class="td-linebottomrt">10368.00 Kb</td><td class="td-linebottomrt" class="td-linebottomrt">2.2%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=2 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line144">144</a></td><td class="td-linebottomrt"><pre>trackdata.trx(i).theta = choos...</pre></td><td class="td-linebottomrt">32</td><td class="td-linebottomrt">73.013 s</td><td class="td-linebottomrt">347070.06 Kb</td><td class="td-linebottomrt">345391.22 Kb</td><td class="td-linebottomrt">160.00 Kb</td><td class="td-linebottomrt" class="td-linebottomrt">1.6%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=2 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line411">411</a></td><td class="td-linebottomrt"><pre>trackdata.trx(i).theta = choos...</pre></td><td class="td-linebottomrt">10</td><td class="td-linebottomrt">23.762 s</td><td class="td-linebottomrt">265839.88 Kb</td><td class="td-linebottomrt">265110.44 Kb</td><td class="td-linebottomrt">10368.58 Kb</td><td class="td-linebottomrt" class="td-linebottomrt">0.5%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=1 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line389">389</a></td><td class="td-linebottomrt"><pre>save(out.temp_full,'trackdata'...</pre></td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">1.922 s</td><td class="td-linebottomrt">23.23 Kb</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">23.23 Kb</td><td class="td-linebottomrt" class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt">All other lines</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">7.472 s</td><td class="td-linebottomrt">167903.33 Kb</td><td class="td-linebottomrt">128814.56 Kb</td><td class="td-linebottomrt">10368.58 Kb</td><td class="td-linebottomrt">0.2%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Totals</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">4605.080 s</td><td class="td-linebottomrt" bgcolor="#F0F0F0">349367446.92 Kb</td><td class="td-linebottomrt" bgcolor="#F0F0F0">349292788.09 Kb</td><td class="td-linebottomrt" bgcolor="#F0F0F0">10368.58 Kb</td><td class="td-linebottomrt" bgcolor="#F0F0F0">100%</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td></tr></table><div class="grayline"/><b>Children</b> (called functions)<br/><p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Name</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Type</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Total Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Allocated Memory</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Freed Memory</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Peak Memory</td><td class="td-linebottomrt" bgcolor="#F0F0F0">% Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Time Plot</td></tr><tr><td class="td-linebottomrt"><a href="file60.html">TrackWingsHelper_GUI</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">4395.462 s</td><td class="td-linebottomrt">348443709.58 Kb</td><td class="td-linebottomrt">347734239.11 Kb</td><td class="td-linebottomrt">9755.05 Kb</td><td class="td-linebottomrt">95.4%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=95 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file70.html">AssignIdentities_GUI</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">16</td><td class="td-linebottomrt">103.326 s</td><td class="td-linebottomrt">134034.45 Kb</td><td class="td-linebottomrt">130461.62 Kb</td><td class="td-linebottomrt">10368.00 Kb</td><td class="td-linebottomrt">2.2%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=2 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file177.html">choose_orientations2</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">32</td><td class="td-linebottomrt">73.013 s</td><td class="td-linebottomrt">347068.78 Kb</td><td class="td-linebottomrt">345015.97 Kb</td><td class="td-linebottomrt">160.00 Kb</td><td class="td-linebottomrt">1.6%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=2 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file178.html">choose_orientations</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">10</td><td class="td-linebottomrt">23.756 s</td><td class="td-linebottomrt">265839.88 Kb</td><td class="td-linebottomrt">265012.31 Kb</td><td class="td-linebottomrt">10368.58 Kb</td><td class="td-linebottomrt">0.5%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=1 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file281.html">median</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">33</td><td class="td-linebottomrt">0.111 s</td><td class="td-linebottomrt">26373.28 Kb</td><td class="td-linebottomrt">27195.25 Kb</td><td class="td-linebottomrt">824.02 Kb</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file6.html">get_readframe_fcn</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.111 s</td><td class="td-linebottomrt">36106.44 Kb</td><td class="td-linebottomrt">26240.33 Kb</td><td class="td-linebottomrt">5420.06 Kb</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file202.html">cell.intersect</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.022 s</td><td class="td-linebottomrt">527.77 Kb</td><td class="td-linebottomrt">161.80 Kb</td><td class="td-linebottomrt">73.38 Kb</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file117.html">...et_readframe_fcn>@(f)ufmfreadframe(f)</a></td><td class="td-linebottomrt">anonymous function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.017 s</td><td class="td-linebottomrt">2140.69 Kb</td><td class="td-linebottomrt">1093.64 Kb</td><td class="td-linebottomrt">1080.05 Kb</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file179.html">modrange</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">42</td><td class="td-linebottomrt">0.011 s</td><td class="td-linebottomrt">3296.80 Kb</td><td class="td-linebottomrt">43.50 Kb</td><td class="td-linebottomrt">78.53 Kb</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file88.html">repmat</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">32</td><td class="td-linebottomrt">0.011 s</td><td class="td-linebottomrt">2538.02 Kb</td><td class="td-linebottomrt">23.62 Kb</td><td class="td-linebottomrt">87.42 Kb</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file210.html">meshgrid</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.006 s</td><td class="td-linebottomrt">17388.70 Kb</td><td class="td-linebottomrt">14.64 Kb</td><td class="td-linebottomrt">8668.00 Kb</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file208.html">mean</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">2</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0.22 Kb</td><td class="td-linebottomrt">5.73 Kb</td><td class="td-linebottomrt">0.09 Kb</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file42.html">open_log</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0.12 Kb</td><td class="td-linebottomrt">0.08 Kb</td><td class="td-linebottomrt">0.09 Kb</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file55.html">SetBackgroundTypes</a></td><td class="td-linebottomrt">script</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0.59 Kb</td><td class="td-linebottomrt">0.38 Kb</td><td class="td-linebottomrt">0.33 Kb</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file72.html">myparse</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0.53 Kb</td><td class="td-linebottomrt">0.53 Kb</td><td class="td-linebottomrt">0.16 Kb</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file65.html">datestr</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">8.17 Kb</td><td class="td-linebottomrt">3.08 Kb</td><td class="td-linebottomrt">4.89 Kb</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file61.html">TimestampFormat</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0.06 Kb</td><td class="td-linebottomrt">0.05 Kb</td><td class="td-linebottomrt">0.06 Kb</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file56.html">now</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0.45 Kb</td><td class="td-linebottomrt">0.38 Kb</td><td class="td-linebottomrt">0.14 Kb</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt">Self time (built-ins, overhead, etc.)</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">9.234 s</td><td class="td-linebottomrt">88412.39 Kb</td><td class="td-linebottomrt">763276.08 Kb</td><td class="td-linebottomrt">10368.58 Kb</td><td class="td-linebottomrt">0.2%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Totals</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">4605.080 s</td><td class="td-linebottomrt" bgcolor="#F0F0F0">349367446.92 Kb</td><td class="td-linebottomrt" bgcolor="#F0F0F0">349292788.09 Kb</td><td class="td-linebottomrt" bgcolor="#F0F0F0">10368.58 Kb</td><td class="td-linebottomrt" bgcolor="#F0F0F0">100%</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td></tr></table><div class="grayline"/><strong>Code Analyzer results</strong><br/>No Code Analyzer messages.<div class="grayline"/><strong>Coverage results</strong><br/>Show coverage for parent directory <br/><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Total lines in function</td><td class="td-linebottomrt">608</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Non-code lines (comments, blank lines)</td><td class="td-linebottomrt">139</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines (lines that can run)</td><td class="td-linebottomrt">469</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines that did run</td><td class="td-linebottomrt">303</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines that did not run</td><td class="td-linebottomrt">166</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Coverage (did run/can run)</td><td class="td-linebottomrt">64.61 %</td></tr></table><div class="grayline"/><b>Function listing</b><br/><table border = "0" cellpadding = "1" cellspacing = "5"><style> td,th { text-align:center; } .leftAligned{ text-align:left; }</style><tr><th><span style="color: #FF0000; font-weight: bold; text-decoration: none">time</span> </th><th><span style="color: #0000FF; font-weight: bold; text-decoration: none">calls</span> </th><th><span style="color: #20AF20; font-weight: bold; text-decoration: none">mem</span> </th><th class="leftAligned"><span style="font-weight: bold; text-decoration: none">  line</span></th></tr><tr><td></td><td></td><td> (1 call, 4605.080 sec, 349367446.92 Kb, 349292788.09 Kb, 10368.58 Kb)</span><br/></td><td class="leftAligned"><pre><span style="color: #A0A0A0">   1</span> <span style="color: #A0A0A0; background: #FFFFFF;">function trackdata=TrackTwoFlies_GUI_debug2(moviefile,bgmed,roidata,params,varargin)</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td> (1 call, 4605.080 sec, 349367446.92 Kb, 349292788.09 Kb, 10368.58 Kb)</span><br/></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">   2</span> <span style="color: #000000; background: #FFFFFF;">nrois=roidata.nrois; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">   3</span> <span style="color: #000000; background: #FFFFFF;">version = '0.1.1'; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">    14.1k/11k/4.89k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">   4</span> <span style="color: #000000; background: #FFFFFF;">timestamp = <a href="file65.html">datestr</a>(<a href="file56.html">now</a>,<a href="file61.html">TimestampFormat</a>); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">   6.05k/544b/3.72k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">   5</span> <span style="color: #000000; background: #FFFFFF;">[restart] = <a href="file72.html">myparse</a>(varargin,'restart',''); %[restart,tmpfilename,logfid] = <a href="file72.html">myparse</a>(varargin,'restart','','tmpfilename',tmpfilename,'logfid',1); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     1.3k/384b/720b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">   6</span> <span style="color: #000000; background: #FFFFFF;"><a href="file55.html">SetBackgroundTypes</a>; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     1.3k/384b/720b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">   7</span> <span style="color: #000000; background: #FFFFFF;">flycolors = {'r','b'}; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         96b/0b/96b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">   8</span> <span style="color: #000000; background: #FFFFFF;">stages = {'maintracking','reformat','chooseorientations','trackwings1','assignids','chooseorientations2','trackwings2'}; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         96b/0b/96b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">   9</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       320b/0b/320b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  10</span> <span style="color: #000000; background: #FFFFFF;">out=getappdata(0,'out'); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     1.3k/96b/1.17k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  11</span> <span style="color: #000000; background: #FFFFFF;">logfid=<a href="file42.html">open_log</a>('track_log',getappdata(0,'cbparams'),out.folder); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.3k/96b/1.17k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  12</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.3k/96b/1.17k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  13</span> <span style="color: #228B22; background: #FFFFFF;">%% open movie</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.3k/96b/1.17k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  14</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     12.9k/0b/12.9k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  15</span> <span style="color: #000000; background: #FFFFFF;">fprintf(logfid,'Opening movie...\n'); </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.11 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">  35.3m/25.6m/5.29m </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  16</span> <span style="color: #000000; background: #FFFFFF;">[readframe,nframes,fid,headerinfo] = <a href="file6.html">get_readframe_fcn</a>(moviefile); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  35.3m/25.6m/5.29m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  17</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  35.3m/25.6m/5.29m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  18</span> <span style="color: #228B22; background: #FFFFFF;">%% initialize</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     5.25k/0b/5.25k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  19</span> <span style="color: #000000; background: #FFFFFF;">trackdata=getappdata(0,'trackdata'); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     5.25k/0b/5.25k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  20</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     12.8k/0b/12.8k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  21</span> <span style="color: #000000; background: #FFFFFF;">restartstage = trackdata.stage; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     10.7k/0b/10.7k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  22</span> <span style="color: #000000; background: #FFFFFF;">if ~isempty(restart), </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     10.7k/0b/10.7k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  23</span> <span style="color: #A0A0A0; background: #FFFFFF;">  fprintf(logfid,'Restarting from stage %s...\n',trackdata.stage);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     10.7k/0b/10.7k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  24</span> <span style="color: #A0A0A0; background: #FFFFFF;">end</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     10.7k/0b/10.7k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  25</span> <span style="color: #000000; background: #FFFFFF;">t=trackdata.t; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     10.7k/0b/10.7k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  26</span> <span style="color: #000000; background: #FFFFFF;">nframes_track = t - params.firstframetrack + 1; </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     2.52m/0b/2.52m </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  27</span> <span style="color: #000000; background: #FFFFFF;">trxx = trackdata.trxx(:,:,1:nframes_track);  </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     2.45m/0b/2.45m </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  28</span> <span style="color: #000000; background: #FFFFFF;">trxy = trackdata.trxy(:,:,1:nframes_track);  </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     2.45m/0b/2.45m </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  29</span> <span style="color: #000000; background: #FFFFFF;">trxa = trackdata.trxa(:,:,1:nframes_track);  </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     2.45m/0b/2.45m </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  30</span> <span style="color: #000000; background: #FFFFFF;">trxb = trackdata.trxb(:,:,1:nframes_track);  </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     4.23m/0b/4.23m </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  31</span> <span style="color: #000000; background: #FFFFFF;">trxtheta = trackdata.trxtheta(:,:,1:nframes_track);  </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     1.22m/0b/1.22m </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  32</span> <span style="color: #000000; background: #FFFFFF;">istouching = trackdata.istouching(:,1:nframes_track); </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     1.22m/0b/1.22m </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  33</span> <span style="color: #000000; background: #FFFFFF;">gmm_isbadprior = trackdata.gmm_isbadprior(:,1:nframes_track); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.22m/0b/1.22m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  34</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.22m/0b/1.22m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  35</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.22m/0b/1.22m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  36</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/74.2k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  37</span> <span style="color: #000000; background: #FFFFFF;">stage = 'reformat';  </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/74.2k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  38</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/8.72k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  39</span> <span style="color: #000000; background: #FFFFFF;">if isfield(headerinfo,'timestamps'), </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     9.88k/0b/9.88k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  40</span> <span style="color: #000000; background: #FFFFFF;">  timestamps = headerinfo.timestamps; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     9.88k/0b/9.88k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  41</span> <span style="color: #A0A0A0; background: #FFFFFF;">elseif isfield(headerinfo,'FrameRate'),</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     9.88k/0b/9.88k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  42</span> <span style="color: #A0A0A0; background: #FFFFFF;">  timestamps = (0:nframes-1)/headerinfo.FrameRate;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     9.88k/0b/9.88k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  43</span> <span style="color: #A0A0A0; background: #FFFFFF;">elseif isfield(headerinfo,'fps'),</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     9.88k/0b/9.88k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  44</span> <span style="color: #A0A0A0; background: #FFFFFF;">  timestamps = (0:nframes-1)/headerinfo.fps;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     9.88k/0b/9.88k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  45</span> <span style="color: #228B22; background: #FFFFFF;">else</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     9.88k/0b/9.88k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  46</span> <span style="color: #A0A0A0; background: #FFFFFF;">  warning('No frame rate info found for movie');</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     9.88k/0b/9.88k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  47</span> <span style="color: #A0A0A0; background: #FFFFFF;">  timestamps = nan(1,nframes);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     9.88k/0b/9.88k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  48</span> <span style="color: #A0A0A0; background: #FFFFFF;">end</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     9.88k/0b/9.88k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  49</span> <span style="color: #000000; background: #FFFFFF;">if find(strcmp(stage,stages)) &gt;= find(strcmp(restartstage,stages)) </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     9.88k/0b/9.88k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  50</span> <span style="color: #228B22; background: #FFFFFF;">    %% correct for bounding box of rois</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       256b/0b/256b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  51</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.stage=stage; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       256b/0b/256b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  52</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     12.5k/0b/12.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  53</span> <span style="color: #000000; background: #FFFFFF;">    fprintf(logfid,'Correcting for ROI bounding boxes...\n'); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     12.5k/0b/12.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  54</span> <span style="color: #000000; background: #FFFFFF;">    for roii = 1:nrois,  </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">        544b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  55</span> <span style="color: #000000; background: #FFFFFF;">      roibb = roidata.roibbs(roii,:); </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.01 </span></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">   3.59k/400b/2.95k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  56</span> <span style="color: #000000; background: #FFFFFF;">      trxx(:,roii,:) = trxx(:,roii,:) + roibb(1) - 1; </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.02 </span></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">     544b/240b/272b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  57</span> <span style="color: #000000; background: #FFFFFF;">      trxy(:,roii,:) = trxy(:,roii,:) + roibb(3) - 1; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">       48b/144b/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  58</span> <span style="color: #000000; background: #FFFFFF;">    end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       48b/144b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  59</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       48b/144b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  60</span> <span style="color: #228B22; background: #FFFFFF;">    %% reformat</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       48b/144b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  61</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     1.31k/0b/1.31k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  62</span> <span style="color: #000000; background: #FFFFFF;">    fprintf(logfid,'Reformatting...\n'); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.31k/0b/1.31k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  63</span> <span style="color: #228B22; background: #FFFFFF;">    </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     1.31k/0b/1.31k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  64</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.tracktwoflies_version = version; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     1.31k/0b/1.31k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  65</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.tracktwoflies_timestamp = timestamp; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       320b/0b/320b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  66</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.timestamps = timestamps; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       320b/0b/320b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  67</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/1.11k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  68</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.trx = struct; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/1.11k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  69</span> <span style="color: #000000; background: #FFFFFF;">    j = 1; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  70</span> <span style="color: #000000; background: #FFFFFF;">    fly2roiid = []; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     3.81k/0b/3.81k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  71</span> <span style="color: #000000; background: #FFFFFF;">    for i = 1:nrois, </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">     3.81k/0b/3.81k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  72</span> <span style="color: #000000; background: #FFFFFF;">      if isnan(roidata.nflies_per_roi(i)), </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     3.81k/0b/3.81k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  73</span> <span style="color: #A0A0A0; background: #FFFFFF;">        continue;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     3.81k/0b/3.81k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  74</span> <span style="color: #A0A0A0; background: #FFFFFF;">      end</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">      1.44k/0b/400b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  75</span> <span style="color: #000000; background: #FFFFFF;">      for jj = 1:roidata.nflies_per_roi(i), </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">   178k/1.31k/78.6k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  76</span> <span style="color: #000000; background: #FFFFFF;">        trackdata.trx(j).x = reshape(trxx(jj,i,:),[1,nframes_track]); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     2.45m/0b/78.8k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  77</span> <span style="color: #000000; background: #FFFFFF;">        trackdata.trx(j).y = reshape(trxy(jj,i,:),[1,nframes_track]); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     2.45m/0b/78.8k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  78</span> <span style="color: #228B22; background: #FFFFFF;">        % saved quarter-major, quarter-minor axis</span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.01 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     2.45m/0b/79.7k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  79</span> <span style="color: #000000; background: #FFFFFF;">        trackdata.trx(j).a = reshape(trxa(jj,i,:)/2,[1,nframes_track]); </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.01 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     2.45m/0b/78.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  80</span> <span style="color: #000000; background: #FFFFFF;">        trackdata.trx(j).b = reshape(trxb(jj,i,:)/2,[1,nframes_track]); </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     2.46m/0b/84.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  81</span> <span style="color: #000000; background: #FFFFFF;">        trackdata.trx(j).theta = reshape(trxtheta(jj,i,:),[1,nframes_track]); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     2.46m/0b/84.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  82</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     6.41k/0b/6.41k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  83</span> <span style="color: #000000; background: #FFFFFF;">        trackdata.trx(j).firstframe = params.firstframetrack; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">      5.11k/0b/3.7k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  84</span> <span style="color: #000000; background: #FFFFFF;">        trackdata.trx(j).endframe = params.firstframetrack+nframes_track-1; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     3.48k/0b/2.03k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  85</span> <span style="color: #000000; background: #FFFFFF;">        trackdata.trx(j).nframes = nframes_track; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">       1.48k/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  86</span> <span style="color: #000000; background: #FFFFFF;">        trackdata.trx(j).off = 1-params.firstframetrack; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  87</span> <span style="color: #000000; background: #FFFFFF;">        trackdata.trx(j).roi = i; </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">      1.25k/0b/288b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  88</span> <span style="color: #000000; background: #FFFFFF;">        trackdata.trx(j).arena = struct; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">        992b/0b/32b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  89</span> <span style="color: #000000; background: #FFFFFF;">        if ~roidata.isall, </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">      4.23k/0b/368b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  90</span> <span style="color: #000000; background: #FFFFFF;">            trackdata.trx(j).arena.arena_radius_mm = roidata.radii(i); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">       992b/0b/272b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  91</span> <span style="color: #000000; background: #FFFFFF;">            trackdata.trx(i).arena.arena_center_mm_x = roidata.centerx(i);             </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">      1.44k/0b/272b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  92</span> <span style="color: #000000; background: #FFFFFF;">            trackdata.trx(i).arena.arena_center_mm_y = roidata.centery(i); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     18.9k/0b/18.9k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  93</span> <span style="color: #000000; background: #FFFFFF;">        end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     18.9k/0b/18.9k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  94</span> <span style="color: #228B22; background: #FFFFFF;">        %trackdata.trx(j).roipts = rois{i};</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     18.9k/0b/18.9k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  95</span> <span style="color: #228B22; background: #FFFFFF;">        %trackdata.trx(j).roibb = roibbs(i,:);</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     10.5k/0b/10.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  96</span> <span style="color: #000000; background: #FFFFFF;">        trackdata.trx(j).moviefile = moviefile; </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.01 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">      4.82m/0b/157k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  97</span> <span style="color: #000000; background: #FFFFFF;">        trackdata.trx(j).dt = diff(timestamps(trackdata.trx(j).firstframe:trackdata.trx(j).endframe)); </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     2.46m/0b/80.7k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  98</span> <span style="color: #000000; background: #FFFFFF;">        trackdata.trx(j).timestamps = timestamps(trackdata.trx(j).firstframe:trackdata.trx(j).endframe);     </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">      2.42k/0b/192b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  99</span> <span style="color: #000000; background: #FFFFFF;">        fly2roiid(j) = jj;  %#ok&lt;AGROW&gt; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">      2.42k/0b/192b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 100</span> <span style="color: #000000; background: #FFFFFF;">        j = j + 1; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">        0b/2.03k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 101</span> <span style="color: #000000; background: #FFFFFF;">      end </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">       672b/68k/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 102</span> <span style="color: #000000; background: #FFFFFF;">    end </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       672b/68k/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 103</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.istouching = istouching; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         0b/2.8k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 104</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.gmm_isbadprior = gmm_isbadprior; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         0b/2.8k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 105</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.stage=stages{find(strcmp(stage,stages))+1}; </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  1.61 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     42.5k/0b/42.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 106</span> <span style="color: #000000; background: #FFFFFF;">    save(out.temp_full,'trackdata','-append') </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     42.5k/0b/42.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 107</span> <span style="color: #000000; background: #FFFFFF;">    setappdata(0,'trackdata',trackdata) </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     27.5k/0b/27.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 108</span> <span style="color: #000000; background: #FFFFFF;">end </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     29.2k/0b/29.2k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 109</span> <span style="color: #000000; background: #FFFFFF;">nflies = numel(trackdata.trx);  </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.2k/0b/29.2k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 110</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.2k/0b/29.2k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 111</span> <span style="color: #228B22; background: #FFFFFF;">%% resolve head/tail ambiguity</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.2k/0b/29.2k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 112</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         80b/0b/80b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 113</span> <span style="color: #000000; background: #FFFFFF;">stage = 'chooseorientations';   </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 114</span> <span style="color: #000000; background: #FFFFFF;">if find(strcmp(stage,stages)) &gt;= find(strcmp(restartstage,stages)), </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.01 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     21.4k/0b/21.4k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 115</span> <span style="color: #000000; background: #FFFFFF;">    fprintf(logfid,'Choosing orientations 1...\n'); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     21.4k/0b/21.4k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 116</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     21.4k/0b/21.4k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 117</span> <span style="color: #000000; background: #FFFFFF;">    for i = 1:nflies, </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     21.4k/0b/21.4k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 118</span> <span style="color: #000000; background: #FFFFFF;">      x = trackdata.trx(i).x; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     21.4k/0b/21.4k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 119</span> <span style="color: #000000; background: #FFFFFF;">      y = trackdata.trx(i).y; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     21.4k/0b/21.4k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 120</span> <span style="color: #000000; background: #FFFFFF;">      theta = trackdata.trx(i).theta; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     21.4k/0b/21.4k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 121</span> <span style="color: #000000; background: #FFFFFF;">      roii = trackdata.trx(i).roi; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     21.4k/0b/21.4k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 122</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">    154k/169k/78.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 123</span> <span style="color: #000000; background: #FFFFFF;">      dx = diff(x); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     78.5k/0b/78.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 124</span> <span style="color: #000000; background: #FFFFFF;">      dy = diff(y); </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">   78.5k/496b/78.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 125</span> <span style="color: #000000; background: #FFFFFF;">      v = sqrt(dx.^2 + dy.^2); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">   78.5k/496b/78.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 126</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">   78.5k/496b/78.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 127</span> <span style="color: #228B22; background: #FFFFFF;">      % don't use velocity when touching, just keep angle consistent</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">   78.5k/496b/78.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 128</span> <span style="color: #228B22; background: #FFFFFF;">      % to do this, set max_velocity_angle_weight to 0 when flies are touching</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">  36.6k/1.74m/10.1k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 129</span> <span style="color: #000000; background: #FFFFFF;">      istouching = trackdata.istouching(roii,:) &gt; .5; </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     28.5k/0b/28.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 130</span> <span style="color: #000000; background: #FFFFFF;">      isjumping = v&gt;=params.choose_orientations_min_jump_speed; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     119k/68.5k/10k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 131</span> <span style="color: #000000; background: #FFFFFF;">      isjumping = [false,isjumping(1:end-1)|isjumping(2:end),false]; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">      3.29m/0b/148k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 132</span> <span style="color: #000000; background: #FFFFFF;">      weight_phi = min(params.choose_orientations_max_velocity_angle_weight,params.choose_orientations_velocity_angle_weight.*[0,v]); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">        0b/1.56m/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 133</span> <span style="color: #000000; background: #FFFFFF;">      weight_phi(istouching|isjumping) = 0; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/1.56m/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 134</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/1.56m/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 135</span> <span style="color: #228B22; background: #FFFFFF;">      % also don't rely on change in orientation as much when the fly is circular</span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.02 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">    879k/236k/78.6k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 136</span> <span style="color: #000000; background: #FFFFFF;">      ecc = trackdata.trx(i).b ./ trackdata.trx(i).a; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">    879k/236k/78.6k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 137</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">       128b/0b/128b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 138</span> <span style="color: #000000; background: #FFFFFF;">      parama = (params.choose_orientations_min_ecc_factor-1)/(1-params.choose_orientations_max_ecc_confident); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">         0b/192b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 139</span> <span style="color: #000000; background: #FFFFFF;">      paramb = params.choose_orientations_min_ecc_factor - parama; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         0b/192b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 140</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">    372k/314k/78.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 141</span> <span style="color: #000000; background: #FFFFFF;">      ecc_factor = parama.*ecc + paramb; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     94.6k/0b/94.6k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 142</span> <span style="color: #000000; background: #FFFFFF;">      weight_theta = max(params.choose_orientations_min_ecc_factor,min(1,ecc_factor)) .* params.choose_orientations_weight_theta; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     94.6k/0b/94.6k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 143</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td><span style="color: #FF0000"> 73.01 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     339m/337m/160k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 144</span> <a name="Line144"></a><span style="color: #000000; background: #FFFFFF;">      trackdata.trx(i).theta = <a href="file177.html">choose_orientations2</a>(x,y,theta,weight_theta,weight_phi); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">  78.2k/36.5k/78.2k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 145</span> <span style="color: #000000; background: #FFFFFF;">    end </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">  78.2k/36.5k/78.2k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 146</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.stage=stages{find(strcmp(stage,stages))+1}; </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  1.59 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/64.3k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 147</span> <span style="color: #000000; background: #FFFFFF;">    save(out.temp_full,'trackdata','-append') </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/2.23m/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 148</span> <span style="color: #000000; background: #FFFFFF;">    setappdata(0,'trackdata',trackdata) </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 149</span> <span style="color: #000000; background: #FFFFFF;">end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 150</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 151</span> <span style="color: #228B22; background: #FFFFFF;">%% plot updated results</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 152</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 153</span> <span style="color: #000000; background: #FFFFFF;">if params.DEBUG &gt; 1, </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 154</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 155</span> <span style="color: #A0A0A0; background: #FFFFFF;">  hell = nan(1,nflies);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 156</span> <span style="color: #A0A0A0; background: #FFFFFF;">  htrx = nan(1,nflies);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 157</span> <span style="color: #A0A0A0; background: #FFFFFF;">  him = nan;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 158</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 159</span> <span style="color: #A0A0A0; background: #FFFFFF;">  for iframe = 1:min(nframes_track,500),</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 160</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 161</span> <span style="color: #A0A0A0; background: #FFFFFF;">    t = iframe+params.firstframetrack-1;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 162</span> <span style="color: #A0A0A0; background: #FFFFFF;">    im = readframe(t);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 163</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 164</span> <span style="color: #A0A0A0; background: #FFFFFF;">    if t == params.firstframetrack || ~exist('him','var') || ~ishandle(him),</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 165</span> <span style="color: #A0A0A0; background: #FFFFFF;">      hold off;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 166</span> <span style="color: #A0A0A0; background: #FFFFFF;">      him = imagesc(im,[0,255]);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 167</span> <span style="color: #A0A0A0; background: #FFFFFF;">      axis image;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 168</span> <span style="color: #A0A0A0; background: #FFFFFF;">      colormap gray;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 169</span> <span style="color: #A0A0A0; background: #FFFFFF;">      hold on;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 170</span> <span style="color: #A0A0A0; background: #FFFFFF;">      isnewplot = true;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 171</span> <span style="color: #228B22; background: #FFFFFF;">    else</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 172</span> <span style="color: #A0A0A0; background: #FFFFFF;">      set(him,'CData',im);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 173</span> <span style="color: #A0A0A0; background: #FFFFFF;">      isnewplot = false;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 174</span> <span style="color: #A0A0A0; background: #FFFFFF;">    end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 175</span> <span style="color: #A0A0A0; background: #FFFFFF;">    title(num2str(t));</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 176</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 177</span> <span style="color: #A0A0A0; background: #FFFFFF;">    for i = 1:nflies,</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 178</span> <span style="color: #A0A0A0; background: #FFFFFF;">      fly = fly2roiid(i);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 179</span> <span style="color: #A0A0A0; background: #FFFFFF;">      if isnewplot || ~ishandle(hell(i)),</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 180</span> <span style="color: #A0A0A0; background: #FFFFFF;">        hell(i) = drawflyo(trackdata.trx(i).x(iframe),trackdata.trx(i).y(iframe),...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 181</span> <span style="color: #A0A0A0; background: #FFFFFF;">          trackdata.trx(i).theta(iframe),trackdata.trx(i).a(iframe),...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 182</span> <span style="color: #A0A0A0; background: #FFFFFF;">          trackdata.trx(i).b(iframe),[flycolors{fly},'-']);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 183</span> <span style="color: #228B22; background: #FFFFFF;">      else</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 184</span> <span style="color: #A0A0A0; background: #FFFFFF;">        updatefly(hell(i),trackdata.trx(i).x(iframe),trackdata.trx(i).y(iframe),trackdata.trx(i).theta(iframe),...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 185</span> <span style="color: #A0A0A0; background: #FFFFFF;">          trackdata.trx(i).a(iframe),trackdata.trx(i).b(iframe));</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 186</span> <span style="color: #A0A0A0; background: #FFFFFF;">      end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 187</span> <span style="color: #A0A0A0; background: #FFFFFF;">      if isnewplot || ~ishandle(htrx(i)),</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 188</span> <span style="color: #A0A0A0; background: #FFFFFF;">        htrx(i) = plot(trackdata.trx(i).x(max(iframe-30,1):iframe),trackdata.trx(i).y(max(iframe-30,1):iframe),[flycolors{fly},'.-']);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 189</span> <span style="color: #228B22; background: #FFFFFF;">      else</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 190</span> <span style="color: #A0A0A0; background: #FFFFFF;">        set(htrx(i),'XData',trackdata.trx(i).x(max(iframe-30,1):iframe),...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 191</span> <span style="color: #A0A0A0; background: #FFFFFF;">          'YData',trackdata.trx(i).y(max(iframe-30,1):iframe));</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 192</span> <span style="color: #A0A0A0; background: #FFFFFF;">      end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 193</span> <span style="color: #A0A0A0; background: #FFFFFF;">    end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 194</span> <span style="color: #A0A0A0; background: #FFFFFF;">    drawnow;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 195</span> <span style="color: #A0A0A0; background: #FFFFFF;">  end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 196</span> <span style="color: #A0A0A0; background: #FFFFFF;">end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 197</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 198</span> <span style="color: #228B22; background: #FFFFFF;">%% track wings if using wings</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 199</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 200</span> <span style="color: #000000; background: #FFFFFF;">stage = 'trackwings1';  </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 201</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/14.5k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 202</span> <span style="color: #000000; background: #FFFFFF;">didtrackwings = false; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/14.5k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 203</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         0b/4.5k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 204</span> <span style="color: #000000; background: #FFFFFF;">if find(strcmp(stage,stages)) &gt;= find(strcmp(restartstage,stages)), </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 205</span> <span style="color: #000000; background: #FFFFFF;">    if strcmp(params.assignidsby,'wingsize'), </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 206</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 207</span> <span style="color: #A0A0A0; background: #FFFFFF;">      fprintf(logfid,'Tracking wings 1...\n');</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 208</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 209</span> <span style="color: #A0A0A0; background: #FFFFFF;">      [nr,nc,~] = size(readframe(1));</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 210</span> <span style="color: #A0A0A0; background: #FFFFFF;">      if roidata.isall</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 211</span> <span style="color: #A0A0A0; background: #FFFFFF;">          isarena=true(nr,nc);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 212</span> <span style="color: #228B22; background: #FFFFFF;">      else</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 213</span> <span style="color: #A0A0A0; background: #FFFFFF;">          isarena = false(nr,nc);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 214</span> <span style="color: #A0A0A0; background: #FFFFFF;">          [XGRID,YGRID] = meshgrid(1:nc,1:nr);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 215</span> <span style="color: #A0A0A0; background: #FFFFFF;">          for roii = 1:nrois,</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 216</span> <span style="color: #A0A0A0; background: #FFFFFF;">            if roidata.nflies_per_roi(roii) == 0,</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 217</span> <span style="color: #A0A0A0; background: #FFFFFF;">              continue;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 218</span> <span style="color: #A0A0A0; background: #FFFFFF;">            end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 219</span> <span style="color: #A0A0A0; background: #FFFFFF;">            isarena = isarena | ...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 220</span> <span style="color: #A0A0A0; background: #FFFFFF;">              ( ((XGRID - roidata.centerx(roii)).^2 + ...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 221</span> <span style="color: #A0A0A0; background: #FFFFFF;">              (YGRID - roidata.centery(roii)).^2) ...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 222</span> <span style="color: #A0A0A0; background: #FFFFFF;">              &lt;= roidata.radii(roii)^2 );</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 223</span> <span style="color: #A0A0A0; background: #FFFFFF;">          end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 224</span> <span style="color: #A0A0A0; background: #FFFFFF;">      end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 225</span> <span style="color: #228B22; background: #FFFFFF;">      </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 226</span> <span style="color: #A0A0A0; background: #FFFFFF;">      if ~params.DEBUG</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 227</span> <span style="color: #A0A0A0; background: #FFFFFF;">          debugdata.track=1;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 228</span> <span style="color: #A0A0A0; background: #FFFFFF;">          debugdata.vis=0;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 229</span> <span style="color: #A0A0A0; background: #FFFFFF;">          [wingtrx,wingperframedata,~,wingtrackinfo,wingperframeunits,~] = TrackWingsHelper_GUI([],trackdata.trx,moviefile,double(bgmed),isarena,params.wingtracking_params,debugdata,...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 230</span> <span style="color: #A0A0A0; background: #FFFFFF;">            'firstframe',params.firstframetrack,...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 231</span> <span style="color: #A0A0A0; background: #FFFFFF;">            'debug',params.DEBUG);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 232</span> <span style="color: #A0A0A0; background: #FFFFFF;">          didtrackwings = true;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 233</span> <span style="color: #A0A0A0; background: #FFFFFF;">          trackdata.trackwings_timestamp = wingtrackinfo.trackwings_timestamp;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 234</span> <span style="color: #A0A0A0; background: #FFFFFF;">          trackdata.trackwings_version = wingtrackinfo.trackwings_version;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 235</span> <span style="color: #A0A0A0; background: #FFFFFF;">          trackdata.trx = wingtrx;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 236</span> <span style="color: #A0A0A0; background: #FFFFFF;">          trackdata.perframedata = wingperframedata;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 237</span> <span style="color: #A0A0A0; background: #FFFFFF;">          trackdata.perframeunits = wingperframeunits;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 238</span> <span style="color: #228B22; background: #FFFFFF;">      else</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 239</span> <span style="color: #A0A0A0; background: #FFFFFF;">          cbtrackGUI_WingTracker_video</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 240</span> <span style="color: #A0A0A0; background: #FFFFFF;">          iscancel=getappdata(0,'iscancel');</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 241</span> <span style="color: #A0A0A0; background: #FFFFFF;">          if iscancel</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 242</span> <span style="color: #A0A0A0; background: #FFFFFF;">              return</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 243</span> <span style="color: #A0A0A0; background: #FFFFFF;">          end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 244</span> <span style="color: #A0A0A0; background: #FFFFFF;">          trackdata=getappdata(0,'trackdata');</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 245</span> <span style="color: #A0A0A0; background: #FFFFFF;">      end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 246</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/2.66k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 247</span> <span style="color: #A0A0A0; background: #FFFFFF;">    end</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       304b/0b/304b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 248</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.stage=stages{find(strcmp(stage,stages))+1}; </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  1.55 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     4.02k/0b/4.02k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 249</span> <span style="color: #000000; background: #FFFFFF;">    save(out.temp_full,'trackdata','-append') </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         0b/672b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 250</span> <span style="color: #000000; background: #FFFFFF;">    setappdata(0,'trackdata',trackdata) </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     3.42k/0b/3.42k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 251</span> <span style="color: #000000; background: #FFFFFF;">end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     3.42k/0b/3.42k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 252</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     3.42k/0b/3.42k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 253</span> <span style="color: #228B22; background: #FFFFFF;">%% assign identities based on size of something</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     3.42k/0b/3.42k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 254</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     3.42k/0b/3.42k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 255</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     27.2k/0b/27.2k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 256</span> <span style="color: #000000; background: #FFFFFF;">stage = 'assignids';  </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     27.2k/0b/27.2k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 257</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     27.2k/0b/27.2k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 258</span> <span style="color: #000000; background: #FFFFFF;">if find(strcmp(stage,stages)) &gt;= find(strcmp(restartstage,stages)), </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/23.5k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 259</span> <span style="color: #000000; background: #FFFFFF;">    fprintf(logfid,'Assigning identities based on %s...\n',params.assignidsby); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/23.5k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 260</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">          0b/32b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 261</span> <span style="color: #000000; background: #FFFFFF;">    assignids_nflips = nan(1,nrois); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">          0b/32b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 262</span> <span style="color: #000000; background: #FFFFFF;">    switch params.assignidsby, </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/2.02k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 263</span> <span style="color: #000000; background: #FFFFFF;">      case 'size', </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     1.02k/0b/1.02k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 264</span> <span style="color: #000000; background: #FFFFFF;">        mudatafit = nan(2,3,nrois); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     1.77k/0b/1.77k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 265</span> <span style="color: #000000; background: #FFFFFF;">        sigmadatafit = nan(2,3,nrois); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.77k/0b/1.77k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 266</span> <span style="color: #A0A0A0; background: #FFFFFF;">      case 'wingsize',</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.77k/0b/1.77k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 267</span> <span style="color: #A0A0A0; background: #FFFFFF;">        mudatafit = nan(2,1,nrois);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.77k/0b/1.77k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 268</span> <span style="color: #A0A0A0; background: #FFFFFF;">        sigmadatafit = nan(2,1,nrois);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.77k/0b/1.77k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 269</span> <span style="color: #A0A0A0; background: #FFFFFF;">        wingarea = cell(1,nflies);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.77k/0b/1.77k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 270</span> <span style="color: #A0A0A0; background: #FFFFFF;">        for i = 1:nflies,</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.77k/0b/1.77k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 271</span> <span style="color: #A0A0A0; background: #FFFFFF;">          wingarea{i} = trackdata.perframedata.wing_areal{i}+trackdata.perframedata.wing_arear{i};</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.77k/0b/1.77k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 272</span> <span style="color: #A0A0A0; background: #FFFFFF;">        end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.77k/0b/1.77k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 273</span> <span style="color: #A0A0A0; background: #FFFFFF;">      otherwise,</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.77k/0b/1.77k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 274</span> <span style="color: #A0A0A0; background: #FFFFFF;">        error('Unknown assignidsby value');</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.77k/0b/1.77k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 275</span> <span style="color: #A0A0A0; background: #FFFFFF;">    end</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       144b/0b/144b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 276</span> <span style="color: #000000; background: #FFFFFF;">    niters_assignids_em = nan(1,nrois); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">          0b/16b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 277</span> <span style="color: #000000; background: #FFFFFF;">    cost_assignids = nan(1,nrois); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 278</span> <span style="color: #000000; background: #FFFFFF;">    sigmamotionfit = nan(1,nrois); </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.01 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     4.24m/0b/4.24m </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 279</span> <span style="color: #000000; background: #FFFFFF;">    idsfit = nan(2,nrois,nframes_track); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     4.24m/0b/4.24m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 280</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         32b/0b/32b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 281</span> <span style="color: #000000; background: #FFFFFF;">    oldtrx = trackdata.trx; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       112b/0b/112b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 282</span> <span style="color: #000000; background: #FFFFFF;">    if isfield(trackdata,'perframedata'), </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       112b/0b/112b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 283</span> <span style="color: #A0A0A0; background: #FFFFFF;">      perframefns = fieldnames(trackdata.perframedata);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       112b/0b/112b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 284</span> <span style="color: #A0A0A0; background: #FFFFFF;">      oldperframedata = trackdata.perframedata;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       112b/0b/112b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 285</span> <span style="color: #A0A0A0; background: #FFFFFF;">    end</span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.03 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     733k/163k/205k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 286</span> <span style="color: #000000; background: #FFFFFF;">    trxfns = intersect({'x','y','a','b','theta','xwingl','ywingl','xwingr','ywingr','wing_anglel','wing_angler'},fieldnames(trackdata.trx)); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     17.7k/0b/17.7k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 287</span> <span style="color: #000000; background: #FFFFFF;">    for roii = 1:nrois, </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     17.7k/0b/17.7k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 288</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">         0b/192b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 289</span> <span style="color: #000000; background: #FFFFFF;">      if isnan(roidata.nflies_per_roi(roii)) || roidata.nflies_per_roi(roii) &lt; 2, </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         0b/192b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 290</span> <span style="color: #A0A0A0; background: #FFFFFF;">        continue;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         0b/192b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 291</span> <span style="color: #A0A0A0; background: #FFFFFF;">      end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         0b/192b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 292</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">  1.75k/6.98k/1.55k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 293</span> <span style="color: #000000; background: #FFFFFF;">      flies = find([trackdata.trx.roi]==roii); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  1.75k/6.98k/1.55k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 294</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">       160k/0b/160k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 295</span> <span style="color: #000000; background: #FFFFFF;">      x = cat(1,trackdata.trx(flies).x); </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.01 </span></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">     167k/256b/166k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 296</span> <span style="color: #000000; background: #FFFFFF;">      y = cat(1,trackdata.trx(flies).y); </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.02 </span></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">      728k/6k/76.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 297</span> <span style="color: #000000; background: #FFFFFF;">      appearanceweight = double(~trackdata.istouching(roii,:)); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">      728k/6k/76.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 298</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">       320b/0b/320b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 299</span> <span style="color: #000000; background: #FFFFFF;">      switch params.assignidsby, </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">         0b/928b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 300</span> <span style="color: #000000; background: #FFFFFF;">        case 'size', </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">     160k/112b/160k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 301</span> <span style="color: #000000; background: #FFFFFF;">          a = cat(1,trackdata.trx(flies).a); </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">     164k/128b/164k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 302</span> <span style="color: #000000; background: #FFFFFF;">          b = cat(1,trackdata.trx(flies).b); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">       159k/0b/159k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 303</span> <span style="color: #000000; background: #FFFFFF;">          area = a.*b.*pi*4; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">    485k/74.1k/485k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 304</span> <span style="color: #000000; background: #FFFFFF;">          iddata = cat(3,area,a,b); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">    485k/74.1k/485k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 305</span> <span style="color: #A0A0A0; background: #FFFFFF;">        case 'wingsize',</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">    485k/74.1k/485k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 306</span> <span style="color: #A0A0A0; background: #FFFFFF;">          iddata = cat(1,wingarea{flies});</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">    485k/74.1k/485k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 307</span> <span style="color: #A0A0A0; background: #FFFFFF;">        otherwise,</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">    485k/74.1k/485k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 308</span> <span style="color: #A0A0A0; background: #FFFFFF;">          error('Unknown assignidsby value');</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">    485k/74.1k/485k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 309</span> <span style="color: #A0A0A0; background: #FFFFFF;">      end</span><br/></pre></td></tr><tr><td><span style="color: #FF0000"> 103.33 </span></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">    131m/130m/10.1m </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 310</span> <a name="Line310"></a><span style="color: #000000; background: #FFFFFF;">      [idsfit_curr,mudatafit_curr,sigmadatafit_curr,sigmamotionfit_curr,cost_curr,niters_curr] = ... </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">    131m/130m/10.1m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 311</span> <span style="color: #000000; background: #FFFFFF;">        AssignIdentities_GUI(x,y,iddata,'vel_dampen',params.err_dampen_pos,'appearanceweight',appearanceweight);</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">     5.5k/501k/5.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 312</span> <span style="color: #000000; background: #FFFFFF;">      assignids_nflips(roii) = nnz(idsfit_curr(1,1:end-1)~=idsfit_curr(1,2:end)); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">        0b/63.9k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 313</span> <span style="color: #000000; background: #FFFFFF;">      fprintf(logfid,'Roi %d, flipped ids %d times\n',roii,assignids_nflips(roii)); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/63.9k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 314</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">         2k/0b/128b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 315</span> <span style="color: #000000; background: #FFFFFF;">      for i = 1:2, </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">      5.2k/0b/1.98k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 316</span> <span style="color: #000000; background: #FFFFFF;">        for j = 1:2, </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     64 </span></td><td><span style="color: #20AF20">      71k/2.01m/10k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 317</span> <span style="color: #000000; background: #FFFFFF;">          idx = idsfit_curr(i,:)==j; </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.01 </span></td><td><span style="color: #0000FF">     64 </span></td><td><span style="color: #20AF20">    8.11k/496b/976b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 318</span> <span style="color: #000000; background: #FFFFFF;">          for k = 1:numel(trxfns), </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.04 </span></td><td><span style="color: #0000FF">    320 </span></td><td><span style="color: #20AF20">   14.4m/69.2k/151k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 319</span> <span style="color: #000000; background: #FFFFFF;">            trackdata.trx(flies(i)).(trxfns{k})(idx) = oldtrx(flies(j)).(trxfns{k})(idx); </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">    320 </span></td><td><span style="color: #20AF20">  5.58k/5.55k/3.95k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 320</span> <span style="color: #000000; background: #FFFFFF;">          end </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     64 </span></td><td><span style="color: #20AF20">      96b/78.2k/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 321</span> <span style="color: #000000; background: #FFFFFF;">          if isfield(trackdata,'perframedata'), </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">      96b/78.2k/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 322</span> <span style="color: #A0A0A0; background: #FFFFFF;">            for k = 1:numel(perframefns),</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">      96b/78.2k/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 323</span> <span style="color: #A0A0A0; background: #FFFFFF;">              trackdata.perframedata.(perframefns{k}){flies(i)}(idx) = ...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">      96b/78.2k/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 324</span> <span style="color: #A0A0A0; background: #FFFFFF;">                oldperframedata.(perframefns{k}){flies(j)}(idx);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">      96b/78.2k/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 325</span> <span style="color: #A0A0A0; background: #FFFFFF;">            end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">      96b/78.2k/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 326</span> <span style="color: #A0A0A0; background: #FFFFFF;">          end</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     64 </span></td><td><span style="color: #20AF20">    544b/5.11k/224b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 327</span> <span style="color: #000000; background: #FFFFFF;">        end </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">  8.66k/2.69k/8.62k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 328</span> <span style="color: #000000; background: #FFFFFF;">      end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  8.66k/2.69k/8.62k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 329</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">        0b/3.16k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 330</span> <span style="color: #000000; background: #FFFFFF;">      mudatafit(:,:,roii) = mudatafit_curr; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">         80b/0b/80b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 331</span> <span style="color: #000000; background: #FFFFFF;">      sigmadatafit(:,:,roii) = sigmadatafit_curr; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">        96b/80b/96b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 332</span> <span style="color: #000000; background: #FFFFFF;">      niters_assignids_em(roii) = niters_curr; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">        96b/80b/96b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 333</span> <span style="color: #000000; background: #FFFFFF;">      cost_assignids(roii) = cost_curr; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">         0b/256b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 334</span> <span style="color: #000000; background: #FFFFFF;">      sigmamotionfit(roii) = sigmamotionfit_curr;   </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.01 </span></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">  4.23k/8.16k/3.27k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 335</span> <span style="color: #000000; background: #FFFFFF;">      idsfit(:,roii,:) = idsfit_curr; </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">      96b/82.5k/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 336</span> <span style="color: #000000; background: #FFFFFF;">    end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">      96b/82.5k/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 337</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/4.34k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 338</span> <span style="color: #000000; background: #FFFFFF;">    idx = find(roidata.nflies_per_roi == 2); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       304b/0b/304b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 339</span> <span style="color: #000000; background: #FFFFFF;">    areas_male = mudatafit(1,1,idx); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       192b/0b/192b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 340</span> <span style="color: #000000; background: #FFFFFF;">    areas_female = mudatafit(2,1,idx); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">   2.16k/5.8k/1.94k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 341</span> <span style="color: #000000; background: #FFFFFF;">    area_thresh = (<a href="file208.html">mean</a>(areas_male)+<a href="file208.html">mean</a>(areas_female))/2; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">   2.16k/5.8k/1.94k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 342</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">   2.16k/5.8k/1.94k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 343</span> <span style="color: #000000; background: #FFFFFF;">    idx = find(roidata.nflies_per_roi == 1); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 344</span> <span style="color: #000000; background: #FFFFFF;">    typeperroi = cell(1,nrois); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 345</span> <span style="color: #000000; background: #FFFFFF;">    for ii = 1:numel(idx), </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 346</span> <span style="color: #A0A0A0; background: #FFFFFF;">      i = idx(ii);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 347</span> <span style="color: #A0A0A0; background: #FFFFFF;">      fly = find([trackdata.trx.roi]==roii);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 348</span> <span style="color: #A0A0A0; background: #FFFFFF;">      switch params.assignidsby,</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 349</span> <span style="color: #A0A0A0; background: #FFFFFF;">        case 'size',</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 350</span> <span style="color: #A0A0A0; background: #FFFFFF;">          a = cat(1,trackdata.trx(fly).a);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 351</span> <span style="color: #A0A0A0; background: #FFFFFF;">          b = cat(1,trackdata.trx(fly).b);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 352</span> <span style="color: #A0A0A0; background: #FFFFFF;">          areacurr = a.*b.*pi*4;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 353</span> <span style="color: #A0A0A0; background: #FFFFFF;">        case 'wingsize',</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 354</span> <span style="color: #A0A0A0; background: #FFFFFF;">          areacurr = wingarea{fly};</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 355</span> <span style="color: #A0A0A0; background: #FFFFFF;">        otherwise,</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 356</span> <span style="color: #A0A0A0; background: #FFFFFF;">          error('Unknown assignidsby value');</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 357</span> <span style="color: #A0A0A0; background: #FFFFFF;">      end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 358</span> <span style="color: #A0A0A0; background: #FFFFFF;">      meanareacurr = nanmean(areacurr(:));</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 359</span> <span style="color: #A0A0A0; background: #FFFFFF;">      fprintf(logfid,'%d: %f\n',i,meanareacurr);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 360</span> <span style="color: #A0A0A0; background: #FFFFFF;">      if meanareacurr &lt;= area_thresh, </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 361</span> <span style="color: #A0A0A0; background: #FFFFFF;">        typeperroi{i} = params.typesmallval;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 362</span> <span style="color: #228B22; background: #FFFFFF;">      else</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 363</span> <span style="color: #A0A0A0; background: #FFFFFF;">        typeperroi{i} = params.typebigval;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 364</span> <span style="color: #A0A0A0; background: #FFFFFF;">      end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 365</span> <span style="color: #A0A0A0; background: #FFFFFF;">    end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 366</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     80.7k/0b/80.7k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 367</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.assignids = struct; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 368</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.assignids.nflips = assignids_nflips; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         80b/0b/80b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 369</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.assignids.mudatafit = mudatafit; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 370</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.assignids.sigmadatafit = sigmadatafit; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         16b/0b/16b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 371</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.assignids.niters_em = niters_assignids_em; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         32b/0b/32b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 372</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.assignids.cost = cost_assignids; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       288b/0b/288b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 373</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.assignids.sigmamotionfit = sigmamotionfit; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         0b/128b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 374</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.assignids.idsfit = idsfit; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         0b/128b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 375</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         0b/128b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 376</span> <span style="color: #000000; background: #FFFFFF;">    for i = 1:nflies, </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">         0b/128b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 377</span> <span style="color: #000000; background: #FFFFFF;">      roii = trackdata.trx(i).roi; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">         0b/128b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 378</span> <span style="color: #000000; background: #FFFFFF;">      if roidata.nflies_per_roi(roii) == 2, </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">         0b/128b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 379</span> <span style="color: #000000; background: #FFFFFF;">        if fly2roiid(i) == 1, </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">  1.26m/96.6k/87.4k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 380</span> <span style="color: #000000; background: #FFFFFF;">          trackdata.trx(i).(params.typefield) = <a href="file88.html">repmat</a>({params.typesmallval},[1,nframes_track]); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">  1.26m/96.6k/87.4k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 381</span> <span style="color: #228B22; background: #FFFFFF;">        else </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">  1.23m/7.25k/78.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 382</span> <span style="color: #000000; background: #FFFFFF;">          trackdata.trx(i).(params.typefield) = <a href="file88.html">repmat</a>({params.typebigval},[1,nframes_track]); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">  1.23m/7.25k/78.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 383</span> <span style="color: #000000; background: #FFFFFF;">        end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  1.23m/7.25k/78.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 384</span> <span style="color: #A0A0A0; background: #FFFFFF;">      elseif roidata.nflies_per_roi(i) == 1,</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  1.23m/7.25k/78.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 385</span> <span style="color: #A0A0A0; background: #FFFFFF;">        trackdata.trx(i).(params.typefield) = repmat(typeperroi(i),[1,nframes_track]);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  1.23m/7.25k/78.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 386</span> <span style="color: #A0A0A0; background: #FFFFFF;">      end</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">  37.2k/16.7k/37.2k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 387</span> <span style="color: #000000; background: #FFFFFF;">    end </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">  37.2k/16.7k/37.2k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 388</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.stage=stages{find(strcmp(stage,stages))+1}; </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  1.92 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     23.2k/0b/23.2k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 389</span> <a name="Line389"></a><span style="color: #000000; background: #FFFFFF;">    save(out.temp_full,'trackdata','-append') </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">    0b/1.01e+03b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 390</span> <span style="color: #000000; background: #FFFFFF;">    setappdata(0,'trackdata',trackdata) </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     36.5k/0b/36.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 391</span> <span style="color: #000000; background: #FFFFFF;">end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     36.5k/0b/36.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 392</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     36.5k/0b/36.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 393</span> <span style="color: #228B22; background: #FFFFFF;">%% resolve head/tail ambiguity again, since it is pretty quick</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     36.5k/0b/36.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 394</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         80b/0b/80b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 395</span> <span style="color: #000000; background: #FFFFFF;">stage = 'chooseorientations2';  </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 396</span> <span style="color: #000000; background: #FFFFFF;">if find(strcmp(stage,stages)) &gt;= find(strcmp(restartstage,stages)), </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/18.7k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 397</span> <span style="color: #000000; background: #FFFFFF;">    fprintf(logfid,'Choosing orientations 2...\n'); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       408k/0b/408k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 398</span> <span style="color: #000000; background: #FFFFFF;">    isflip = false(nflies,nframes_track); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       408k/0b/408k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 399</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     16.9k/0b/16.9k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 400</span> <span style="color: #000000; background: #FFFFFF;">    for i = 1:nflies, </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     16.9k/0b/16.9k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 401</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     16.9k/0b/16.9k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 402</span> <span style="color: #228B22; background: #FFFFFF;">      % if there is some kind of flip</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     16.9k/0b/16.9k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 403</span> <span style="color: #000000; background: #FFFFFF;">      roii = trackdata.trx(i).roi; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 404</span> <span style="color: #000000; background: #FFFFFF;">      if trackdata.assignids.nflips(roii) == 0, </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     22 </span></td><td><span style="color: #20AF20">     2.11k/0b/1.92k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 405</span> <span style="color: #000000; background: #FFFFFF;">        continue; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     2.11k/0b/1.92k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 406</span> <span style="color: #A0A0A0; background: #FFFFFF;">      end</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     10 </span></td><td><span style="color: #20AF20">         0b/160k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 407</span> <span style="color: #000000; background: #FFFFFF;">      x = trackdata.trx(i).x; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     10 </span></td><td><span style="color: #20AF20">         0b/160k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 408</span> <span style="color: #000000; background: #FFFFFF;">      y = trackdata.trx(i).y; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     10 </span></td><td><span style="color: #20AF20">         0b/4.5k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 409</span> <span style="color: #000000; background: #FFFFFF;">      theta = trackdata.trx(i).theta; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     10 </span></td><td><span style="color: #20AF20">      11k/71.3k/11k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 410</span> <span style="color: #000000; background: #FFFFFF;">      fprintf(logfid,'Re-choosing orientations for fly %d (nidflips = %d)\n',i,trackdata.assignids.nflips(roii)); </span><br/></pre></td></tr><tr><td><span style="color: #FF0000"> 23.76 </span></td><td><span style="color: #0000FF">     10 </span></td><td><span style="color: #20AF20">    260m/259m/10.1m </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 411</span> <a name="Line411"></a><span style="color: #000000; background: #FFFFFF;">      trackdata.trx(i).theta = <a href="file178.html">choose_orientations</a>(x,y,theta,params.choose_orientations_velocity_angle_weight,params.choose_orientations_max_velocity_angle_weight); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     10 </span></td><td><span style="color: #20AF20">   1.15m/801k/78.8k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 412</span> <span style="color: #000000; background: #FFFFFF;">      isflip(i,:) = round(abs(<a href="file179.html">modrange</a>(theta-trackdata.trx(i).theta,-pi,pi))/pi) &gt; 0; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     10 </span></td><td><span style="color: #20AF20">   2.16k/590k/2.16k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 413</span> <span style="color: #000000; background: #FFFFFF;">      fprintf(logfid,'N. orientation flips = %d\n',nnz(isflip(i,:))); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">   2.16k/590k/2.16k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 414</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     10 </span></td><td><span style="color: #20AF20">   2.16k/590k/2.16k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 415</span> <span style="color: #000000; background: #FFFFFF;">    end </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">   2.16k/590k/2.16k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 416</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.stage=stages{find(strcmp(stage,stages))+1}; </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  1.92 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/59.9k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 417</span> <span style="color: #000000; background: #FFFFFF;">    save(out.temp_full,'trackdata','-append') </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         0b/414k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 418</span> <span style="color: #000000; background: #FFFFFF;">    setappdata(0,'trackdata',trackdata) </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">          0b/41k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 419</span> <span style="color: #000000; background: #FFFFFF;">end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/41k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 420</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/41k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 421</span> <span style="color: #228B22; background: #FFFFFF;">%% track wings</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 422</span> <span style="color: #000000; background: #FFFFFF;">stage = 'trackwings2';  </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 423</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 424</span> <span style="color: #000000; background: #FFFFFF;">if find(strcmp(stage,stages)) &gt;= find(strcmp(restartstage,stages)), </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 425</span> <span style="color: #000000; background: #FFFFFF;">    if didtrackwings, </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 426</span> <span style="color: #A0A0A0; background: #FFFFFF;">      framestrack = cell(1,nrois);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 427</span> <span style="color: #A0A0A0; background: #FFFFFF;">      for roii = 1:nrois,</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 428</span> <span style="color: #A0A0A0; background: #FFFFFF;">        flies = find([trackdata.trx.roi]==roii);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 429</span> <span style="color: #A0A0A0; background: #FFFFFF;">        if isempty(flies),</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 430</span> <span style="color: #A0A0A0; background: #FFFFFF;">          continue;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 431</span> <span style="color: #A0A0A0; background: #FFFFFF;">        end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 432</span> <span style="color: #A0A0A0; background: #FFFFFF;">        framestrack{roii} = find(any(isflip(flies,:),1));</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 433</span> <span style="color: #A0A0A0; background: #FFFFFF;">      end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 434</span> <span style="color: #A0A0A0; background: #FFFFFF;">      roistrack = find(~cellfun(@isempty,framestrack));</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 435</span> <span style="color: #228B22; background: #FFFFFF;">    else </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       160b/0b/160b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 436</span> <span style="color: #000000; background: #FFFFFF;">      roistrack = 1:nrois; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       160b/0b/160b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 437</span> <span style="color: #000000; background: #FFFFFF;">    end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       160b/0b/160b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 438</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       160b/0b/160b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 439</span> <span style="color: #000000; background: #FFFFFF;">    if params.dotrackwings &amp;&amp; ~isempty(roistrack), </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       160b/0b/160b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 440</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     2.44k/0b/2.44k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 441</span> <span style="color: #000000; background: #FFFFFF;">      fprintf(logfid,'Tracking wings 2...\n'); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     2.44k/0b/2.44k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 442</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.02 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">  2.09m/2.12m/1.05m </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 443</span> <span style="color: #000000; background: #FFFFFF;">      [nr,nc,~] = size(readframe(1)); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         0b/192b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 444</span> <span style="color: #000000; background: #FFFFFF;">      if roidata.isall </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         0b/192b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 445</span> <span style="color: #A0A0A0; background: #FFFFFF;">          isarena=true(nr,nc);</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       144b/0b/144b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 446</span> <span style="color: #228B22; background: #FFFFFF;">      else </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     1.06m/0b/1.06m </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 447</span> <span style="color: #000000; background: #FFFFFF;">          isarena = false(nr,nc); </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.02 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">    17m/28.3k/8.46m </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 448</span> <span style="color: #000000; background: #FFFFFF;">          [XGRID,YGRID] = <a href="file210.html">meshgrid</a>(1:nc,1:nr); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 449</span> <span style="color: #000000; background: #FFFFFF;">          for roii = roistrack, </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 450</span> <span style="color: #000000; background: #FFFFFF;">            if roidata.nflies_per_roi(roii) == 0, </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 451</span> <span style="color: #A0A0A0; background: #FFFFFF;">              continue;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 452</span> <span style="color: #A0A0A0; background: #FFFFFF;">            end</span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.07 </span></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 453</span> <span style="color: #000000; background: #FFFFFF;">            isarena = isarena | ... </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 454</span> <span style="color: #000000; background: #FFFFFF;">              ( ((XGRID - roidata.centerx(roii)).^2 + ...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 455</span> <span style="color: #000000; background: #FFFFFF;">              (YGRID - roidata.centery(roii)).^2) ...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     29.5k/0b/29.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 456</span> <span style="color: #000000; background: #FFFFFF;">              &lt;= roidata.radii(roii)^2 );</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">          0b/48b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 457</span> <span style="color: #000000; background: #FFFFFF;">          end </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         0b/352b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 458</span> <span style="color: #000000; background: #FFFFFF;">      end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         0b/352b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 459</span> <span style="color: #228B22; background: #FFFFFF;">      </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       3.2k/0b/3.2k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 460</span> <span style="color: #000000; background: #FFFFFF;">      if didtrackwings, </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       3.2k/0b/3.2k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 461</span> <span style="color: #A0A0A0; background: #FFFFFF;">          debugdata.track=1;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       3.2k/0b/3.2k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 462</span> <span style="color: #A0A0A0; background: #FFFFFF;">          debugdata.vis=0;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       3.2k/0b/3.2k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 463</span> <span style="color: #A0A0A0; background: #FFFFFF;">          if isfield(debugdata,'framestrack')</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       3.2k/0b/3.2k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 464</span> <span style="color: #A0A0A0; background: #FFFFFF;">              debugdata=rmfield(debugdata,{'framestrak','nframestrack','framestracked','nframestracked'});</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       3.2k/0b/3.2k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 465</span> <span style="color: #A0A0A0; background: #FFFFFF;">          end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       3.2k/0b/3.2k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 466</span> <span style="color: #A0A0A0; background: #FFFFFF;">          [wingtrx,wingperframedata,~,wingtrackinfo,wingperframeunits,~] = TrackWingsHelper_GUI([],trackdata.trx,moviefile,double(bgmed),isarena,params.wingtracking_params,debugdata,...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       3.2k/0b/3.2k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 467</span> <span style="color: #A0A0A0; background: #FFFFFF;">              'firstframe',params.firstframetrack,...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       3.2k/0b/3.2k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 468</span> <span style="color: #A0A0A0; background: #FFFFFF;">              'debug',false,...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       3.2k/0b/3.2k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 469</span> <span style="color: #A0A0A0; background: #FFFFFF;">              'framestrack',unique(cat(2,framestrack{:})),...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       3.2k/0b/3.2k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 470</span> <span style="color: #A0A0A0; background: #FFFFFF;">              'perframedata',trackdata.perframedata);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       3.2k/0b/3.2k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 471</span> <span style="color: #A0A0A0; background: #FFFFFF;">          trackdata.trackwings_timestamp = wingtrackinfo.trackwings_timestamp;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       3.2k/0b/3.2k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 472</span> <span style="color: #A0A0A0; background: #FFFFFF;">          trackdata.trackwings_version = wingtrackinfo.trackwings_version;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       3.2k/0b/3.2k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 473</span> <span style="color: #A0A0A0; background: #FFFFFF;">          trackdata.trx = wingtrx;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       3.2k/0b/3.2k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 474</span> <span style="color: #A0A0A0; background: #FFFFFF;">          trackdata.perframedata = wingperframedata;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       3.2k/0b/3.2k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 475</span> <span style="color: #A0A0A0; background: #FFFFFF;">          trackdata.perframeunits = wingperframeunits;</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       3.2k/0b/3.2k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 476</span> <span style="color: #228B22; background: #FFFFFF;">      else   </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         0b/3.8k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 477</span> <span style="color: #000000; background: #FFFFFF;">          if ~params.DEBUG </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       144b/0b/144b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 478</span> <span style="color: #000000; background: #FFFFFF;">              debugdata.track=1; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     6.38k/0b/6.38k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 479</span> <span style="color: #000000; background: #FFFFFF;">              debugdata.vis=0; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     6.38k/0b/6.38k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 480</span> <span style="color: #228B22; background: #FFFFFF;">              %[wingtrx,wingperframedata,~,wingtrackinfo,wingperframeunits,~] = TrackWingsHelper_GUI_old([],trackdata.trx,moviefile,double(bgmed),isarena,params.wingtracking_params,debugdata,...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     6.38k/0b/6.38k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 481</span> <span style="color: #228B22; background: #FFFFFF;">              %    'firstframe',params.firstframetrack,...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     6.38k/0b/6.38k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 482</span> <span style="color: #228B22; background: #FFFFFF;">              %    'debug',params.DEBUG);</span><br/></pre></td></tr><tr><td><span style="color: #FF0000"> 4395.58 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">    332g/332g/9.53m </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 483</span> <a name="Line483"></a><span style="color: #000000; background: #FF8080;">              [wingtrx,wingperframedata,~,wingtrackinfo,wingperframeunits,~] = <a href="file60.html">TrackWingsHelper_GUI</a>([],trackdata.trx,moviefile,double(bgmed),isarena,params.wingtracking_params,debugdata,... </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">    332g/332g/9.53m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 484</span> <span style="color: #000000; background: #FF8080;">                  'firstframe',params.firstframetrack,...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">    332g/332g/9.53m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 485</span> <span style="color: #000000; background: #FF8080;">                  'debug',params.DEBUG);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">    332g/332g/9.53m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 486</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       704b/0b/704b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 487</span> <span style="color: #000000; background: #FFFFFF;">              trackdata.trackwings_timestamp = wingtrackinfo.trackwings_timestamp; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         0b/112b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 488</span> <span style="color: #000000; background: #FFFFFF;">              trackdata.trackwings_version = wingtrackinfo.trackwings_version; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/2.25k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 489</span> <span style="color: #000000; background: #FFFFFF;">              trackdata.trx = wingtrx; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         0b/256b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 490</span> <span style="color: #000000; background: #FFFFFF;">              trackdata.perframedata = wingperframedata; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       224b/0b/224b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 491</span> <span style="color: #000000; background: #FFFFFF;">              trackdata.perframeunits = wingperframeunits; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       224b/0b/224b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 492</span> <span style="color: #228B22; background: #FFFFFF;">          else</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       224b/0b/224b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 493</span> <span style="color: #A0A0A0; background: #FFFFFF;">              cbtrackGUI_WingTracker_video</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       224b/0b/224b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 494</span> <span style="color: #A0A0A0; background: #FFFFFF;">              iscancel=getappdata(0,'iscancel');</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       224b/0b/224b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 495</span> <span style="color: #A0A0A0; background: #FFFFFF;">              if iscancel</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       224b/0b/224b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 496</span> <span style="color: #A0A0A0; background: #FFFFFF;">                  return</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       224b/0b/224b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 497</span> <span style="color: #A0A0A0; background: #FFFFFF;">              end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       224b/0b/224b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 498</span> <span style="color: #A0A0A0; background: #FFFFFF;">              trackdata=getappdata(0,'trackdata');             </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       224b/0b/224b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 499</span> <span style="color: #A0A0A0; background: #FFFFFF;">          end</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       224b/0b/224b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 500</span> <span style="color: #000000; background: #FFFFFF;">      end        </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       224b/0b/224b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 501</span> <span style="color: #000000; background: #FFFFFF;">    end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       224b/0b/224b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 502</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     9.88k/0b/9.88k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 503</span> <span style="color: #000000; background: #FFFFFF;">end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     9.88k/0b/9.88k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 504</span> <span style="color: #228B22; background: #FFFFFF;">%% convert to real units</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     9.88k/0b/9.88k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 505</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/1.39k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 506</span> <span style="color: #000000; background: #FFFFFF;">if isfield(roidata,'pxpermm'), </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/1.39k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 507</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     1.09k/0b/1.09k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 508</span> <span style="color: #000000; background: #FFFFFF;">  dorotate = isfield(roidata,'rotateby'); </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     13.4k/0b/13.4k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 509</span> <span style="color: #000000; background: #FFFFFF;">  dotranslate = all(isfield(roidata,{'centerx','centery'})); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     13.4k/0b/13.4k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 510</span> <span style="color: #000000; background: #FFFFFF;">  if dorotate, </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     13.4k/0b/13.4k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 511</span> <span style="color: #000000; background: #FFFFFF;">    costheta = cos(roidata.rotateby); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     13.4k/0b/13.4k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 512</span> <span style="color: #000000; background: #FFFFFF;">    sintheta = sin(roidata.rotateby); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 513</span> <span style="color: #000000; background: #FFFFFF;">    R = [costheta,-sintheta;sintheta,costheta]; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/4.48k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 514</span> <span style="color: #000000; background: #FFFFFF;">  end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/4.48k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 515</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     58.2k/0b/58.2k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 516</span> <span style="color: #000000; background: #FFFFFF;">  for fly = 1:numel(trackdata.trx), </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     58.2k/0b/58.2k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 517</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     58.2k/0b/58.2k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 518</span> <span style="color: #000000; background: #FFFFFF;">    roii = trackdata.trx(fly).roi; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     58.2k/0b/58.2k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 519</span> <span style="color: #000000; background: #FFFFFF;">    x = trackdata.trx(fly).x; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     58.2k/0b/58.2k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 520</span> <span style="color: #000000; background: #FFFFFF;">    if dotranslate, </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">      392k/0b/78.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 521</span> <span style="color: #000000; background: #FFFFFF;">      x = x - roidata.centerx(roii); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">      392k/0b/78.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 522</span> <span style="color: #000000; background: #FFFFFF;">    end </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">       1.39k/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 523</span> <span style="color: #000000; background: #FFFFFF;">    x = x / roidata.pxpermm; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">       1.39k/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 524</span> <span style="color: #000000; background: #FFFFFF;">    y = trackdata.trx(fly).y; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">       1.39k/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 525</span> <span style="color: #000000; background: #FFFFFF;">    if dotranslate, </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     1.61m/0b/78.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 526</span> <span style="color: #000000; background: #FFFFFF;">      y = y - roidata.centery(roii); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     1.61m/0b/78.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 527</span> <span style="color: #000000; background: #FFFFFF;">    end </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     1.61m/0b/78.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 528</span> <span style="color: #000000; background: #FFFFFF;">    y = y / roidata.pxpermm; </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.01 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">  1.92m/81.5k/78.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 529</span> <span style="color: #000000; background: #FFFFFF;">    a = trackdata.trx(fly).a / roidata.pxpermm; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">  1.84m/81.5k/78.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 530</span> <span style="color: #000000; background: #FFFFFF;">    b = trackdata.trx(fly).b / roidata.pxpermm; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">           0b/5k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 531</span> <span style="color: #000000; background: #FFFFFF;">    theta = trackdata.trx(fly).theta; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">           0b/5k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 532</span> <span style="color: #000000; background: #FFFFFF;">    if dorotate, </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     672k/480k/160k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 533</span> <span style="color: #000000; background: #FFFFFF;">      p = R*[x;y]; </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     2.03m/0b/78.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 534</span> <span style="color: #000000; background: #FFFFFF;">      x = p(1,:); </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">      471k/0b/78.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 535</span> <span style="color: #000000; background: #FFFFFF;">      y = p(2,:); </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.02 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">    4.14m/39k/78.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 536</span> <span style="color: #000000; background: #FFFFFF;">      theta = <a href="file179.html">modrange</a>(theta + roidata.rotateby,-pi,pi); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">    4.14m/39k/78.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 537</span> <span style="color: #000000; background: #FFFFFF;">    end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">    4.14m/39k/78.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 538</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">         0b/153k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 539</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.trx(fly).x_mm = x; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     5.14k/0b/5.14k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 540</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.trx(fly).y_mm = y; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     3.06k/0b/3.06k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 541</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.trx(fly).theta_mm = theta; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     1.33k/0b/1.33k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 542</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.trx(fly).a_mm = a; </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     2.23k/0b/2.23k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 543</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.trx(fly).b_mm = b; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     2.23k/0b/2.23k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 544</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">   1.72k/992b/1.72k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 545</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.trx(fly).pxpermm = roidata.pxpermm; </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.10 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">   25.8m/25.8m/824k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 546</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.trx(fly).fps = 1/<a href="file281.html">median</a>(timestamps); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">   25.8m/25.8m/824k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 547</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">          0b/48b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 548</span> <span style="color: #000000; background: #FFFFFF;">  end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/48b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 549</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         0b/123k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 550</span> <span style="color: #000000; background: #FFFFFF;">end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         0b/123k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 551</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       824k/0b/824k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 552</span> <span style="color: #000000; background: #FFFFFF;">dt = diff(timestamps); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         98k/0b/98k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 553</span> <span style="color: #000000; background: #FFFFFF;">if all(isnan(dt)), </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         98k/0b/98k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 554</span> <span style="color: #A0A0A0; background: #FFFFFF;">  fps = 30;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         98k/0b/98k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 555</span> <span style="color: #A0A0A0; background: #FFFFFF;">  warning('Unknown fps, assigning to 30');</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         98k/0b/98k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 556</span> <span style="color: #A0A0A0; background: #FFFFFF;">  mediandt = 1/fps;</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         98k/0b/98k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 557</span> <span style="color: #228B22; background: #FFFFFF;">else </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.02 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     849k/824k/848k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 558</span> <span style="color: #000000; background: #FFFFFF;">  mediandt = <a href="file281.html">median</a>(dt(~isnan(dt))); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     849k/824k/848k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 559</span> <span style="color: #000000; background: #FFFFFF;">  fps = 1/mediandt; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     849k/824k/848k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 560</span> <span style="color: #000000; background: #FFFFFF;">end </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     849k/824k/848k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 561</span> <span style="color: #000000; background: #FFFFFF;">for fly = 1:nflies, </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">         0b/160b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 562</span> <span style="color: #000000; background: #FFFFFF;">  trackdata.trx(fly).fps = fps; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">         0b/106k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 563</span> <span style="color: #000000; background: #FFFFFF;">end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         0b/106k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 564</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     6.03k/0b/6.03k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 565</span> <span style="color: #000000; background: #FFFFFF;">if isfield(params,'usemediandt') &amp;&amp; params.usemediandt, </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     6.03k/0b/6.03k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 566</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     6.03k/0b/6.03k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 567</span> <span style="color: #000000; background: #FFFFFF;">  for fly = 1:nflies, </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">     2.45m/0b/78.6k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 568</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.trx(fly).dt = <a href="file88.html">repmat</a>(mediandt,[1,trackdata.trx(fly).nframes-1]); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">        0b/1.97k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 569</span> <span style="color: #000000; background: #FFFFFF;">  end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/1.97k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 570</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         32b/0b/32b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 571</span> <span style="color: #000000; background: #FFFFFF;">end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         32b/0b/32b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 572</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         32b/0b/32b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 573</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         32b/0b/32b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 574</span> <span style="color: #228B22; background: #FFFFFF;">%% add arena parameters</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         32b/0b/32b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 575</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         32b/0b/32b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 576</span> <span style="color: #000000; background: #FFFFFF;">if all(isfield(roidata,{'centerx','centery','radii'})), </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         32b/0b/32b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 577</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     4.41k/0b/4.41k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 578</span> <span style="color: #000000; background: #FFFFFF;">  for i = 1:nflies, </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">         0b/144b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 579</span> <span style="color: #000000; background: #FFFFFF;">    roii = trackdata.trx(i).roi; </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">       3.2k/0b/112b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 580</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.trx(i).arena.arena_radius_mm = roidata.radii(roii) / roidata.pxpermm; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">          1k/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 581</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.trx(i).arena.arena_center_mm_x = 0; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">       512b/32b/32b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 582</span> <span style="color: #000000; background: #FFFFFF;">    trackdata.trx(i).arena.arena_center_mm_y = 0; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     32 </span></td><td><span style="color: #20AF20">          0b/48b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 583</span> <span style="color: #000000; background: #FFFFFF;">  end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/48b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 584</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">          0b/48b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 585</span> <span style="color: #000000; background: #FFFFFF;">end </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         0b/111k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 586</span> <span style="color: #000000; background: #FFFFFF;">setappdata(0,'trackdata',trackdata) </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         0b/111k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 587</span> <span style="color: #228B22; background: #FFFFFF;">%% clean up</span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/71.7k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 588</span> <span style="color: #000000; background: #FFFFFF;">fprintf(logfid,'Clean up...\n'); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/71.7k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 589</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/71.7k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 590</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/71.7k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 591</span> <span style="color: #000000; background: #FFFFFF;">if fid &gt; 1, </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         96b/0b/96b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 592</span> <span style="color: #000000; background: #FFFFFF;">  try </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/6.05k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 593</span> <span style="color: #000000; background: #FFFFFF;">    fclose(fid); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/6.05k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 594</span> <span style="color: #A0A0A0; background: #FFFFFF;">  catch ME,</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/6.05k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 595</span> <span style="color: #A0A0A0; background: #FFFFFF;">    warning('Could not close movie: %s',getReport(ME));</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/6.05k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 596</span> <span style="color: #A0A0A0; background: #FFFFFF;">  end</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     1.38k/0b/1.38k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 597</span> <span style="color: #000000; background: #FFFFFF;">end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.38k/0b/1.38k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 598</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.38k/0b/1.38k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 599</span> <span style="color: #228B22; background: #FFFFFF;">% if exist(out.temp_full,'file'),</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.38k/0b/1.38k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 600</span> <span style="color: #228B22; background: #FFFFFF;">%   try</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.38k/0b/1.38k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 601</span> <span style="color: #228B22; background: #FFFFFF;">%     delete(out.temp_full);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.38k/0b/1.38k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 602</span> <span style="color: #228B22; background: #FFFFFF;">%   catch ME,</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.38k/0b/1.38k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 603</span> <span style="color: #228B22; background: #FFFFFF;">%     warning('Could not delete tmp file: %s',getReport(ME));</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.38k/0b/1.38k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 604</span> <span style="color: #228B22; background: #FFFFFF;">%   end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.38k/0b/1.38k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 605</span> <span style="color: #228B22; background: #FFFFFF;">% end</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">          0b/48b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 606</span> <span style="color: #000000; background: #FFFFFF;">if logfid &gt; 1, </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/48b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 607</span> <span style="color: #A0A0A0; background: #FFFFFF;">  fclose(logfid);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/48b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 608</span> <span style="color: #A0A0A0; background: #FFFFFF;">end</span><br/></pre></td></tr></table></body></html>