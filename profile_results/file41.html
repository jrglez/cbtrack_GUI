<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" /><link rel="stylesheet" href="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/matlab-report-styles.css" type="text/css" /><title>Function details for CourtshipBowlMakeResultsMovie_GUI</title><link rel="stylesheet" href="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/matlab-report-styles.css" type="text/css" /></head><body bgcolor="#F8F8F8"><strong>This is a static copy of a profile report</strong><p><a href="file0.html">Home</a><p><span style="font-size:14pt; background:#FFE4B0">CourtshipBowlMakeResultsMovie_GUI (1 call, 286.237 sec, 46884512.56 Kb, 46874646.50 Kb, 63982.78 Kb)</span><br/><i>Generated 03-Apr-2014 11:11:02 using cpu time.</i><br/>function in file /Users/juan/Documents/janelia/cbtrack_GUI/CourtshipBowlMakeResultsMovie_GUI.m<br/>Copy to new window for comparing multiple runs<div class="grayline"/><div class="grayline"/><strong>Parents</strong> (calling functions)<br/><p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Name</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Type</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td></tr><tr><td class="td-linebottomrt"><a href="file43.html">cbtrackGUI_tracker_NOvideo</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td></tr></table><div class="grayline"/><strong>Lines where the most time was spent</strong><br/> <p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Line Number</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Code</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Total Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Allocated Memory</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Freed Memory</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Peak Memory</td><td class="td-linebottomrt" bgcolor="#F0F0F0">% Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Time Plot</td></tr><tr><td class="td-linebottomrt"><a href="#Line181">181</a></td><td class="td-linebottomrt"><pre>[succeeded,~,~,height,width]= ...</pre></td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">284.476 s</td><td class="td-linebottomrt">46821185.58 Kb</td><td class="td-linebottomrt">46811768.58 Kb</td><td class="td-linebottomrt">63982.78 Kb</td><td class="td-linebottomrt" class="td-linebottomrt">99.4%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=99 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line60">60</a></td><td class="td-linebottomrt"><pre>load(trxfile,'trx');</pre></td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">1.611 s</td><td class="td-linebottomrt">62768.16 Kb</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">62768.16 Kb</td><td class="td-linebottomrt" class="td-linebottomrt">0.6%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=1 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line49">49</a></td><td class="td-linebottomrt"><pre>[~,basename] = fileparts(expdi...</pre></td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.017 s</td><td class="td-linebottomrt">95.16 Kb</td><td class="td-linebottomrt">37.58 Kb</td><td class="td-linebottomrt">50.20 Kb</td><td class="td-linebottomrt" class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line173">173</a></td><td class="td-linebottomrt"><pre>if ~DEBUG &amp;&amp; exist(avi...</pre></td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.006 s</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">25.48 Kb</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt" class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line171">171</a></td><td class="td-linebottomrt"><pre>fprintf(logfid,'Calling make_c...</pre></td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.006 s</td><td class="td-linebottomrt">26.53 Kb</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">26.53 Kb</td><td class="td-linebottomrt" class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt">All other lines</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">0.122 s</td><td class="td-linebottomrt">437.14 Kb</td><td class="td-linebottomrt">62814.86 Kb</td><td class="td-linebottomrt">63982.78 Kb</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Totals</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">286.237 s</td><td class="td-linebottomrt" bgcolor="#F0F0F0">46884512.56 Kb</td><td class="td-linebottomrt" bgcolor="#F0F0F0">46874646.50 Kb</td><td class="td-linebottomrt" bgcolor="#F0F0F0">63982.78 Kb</td><td class="td-linebottomrt" bgcolor="#F0F0F0">100%</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td></tr></table><div class="grayline"/><b>Children</b> (called functions)<br/><p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Name</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Type</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Total Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Allocated Memory</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Freed Memory</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Peak Memory</td><td class="td-linebottomrt" bgcolor="#F0F0F0">% Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Time Plot</td></tr><tr><td class="td-linebottomrt"><a href="file8.html">make_ctrax_result_movie_GUI</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">284.431 s</td><td class="td-linebottomrt">46820519.73 Kb</td><td class="td-linebottomrt">46811760.33 Kb</td><td class="td-linebottomrt">63982.78 Kb</td><td class="td-linebottomrt">99.4%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=99 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file7.html">fileparts</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.017 s</td><td class="td-linebottomrt">56.75 Kb</td><td class="td-linebottomrt">37.58 Kb</td><td class="td-linebottomrt">50.20 Kb</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file44.html">fullfile</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">6</td><td class="td-linebottomrt">0.011 s</td><td class="td-linebottomrt">13.75 Kb</td><td class="td-linebottomrt">12.16 Kb</td><td class="td-linebottomrt">1.98 Kb</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file287.html">jet</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.006 s</td><td class="td-linebottomrt">15.89 Kb</td><td class="td-linebottomrt">3.09 Kb</td><td class="td-linebottomrt">11.30 Kb</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file42.html">open_log</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0.12 Kb</td><td class="td-linebottomrt">0.08 Kb</td><td class="td-linebottomrt">0.09 Kb</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file286.html">isunix</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">2.08 Kb</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file65.html">datestr</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">9.05 Kb</td><td class="td-linebottomrt">3.06 Kb</td><td class="td-linebottomrt">5.89 Kb</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file61.html">TimestampFormat</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0.06 Kb</td><td class="td-linebottomrt">0.05 Kb</td><td class="td-linebottomrt">0.06 Kb</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file56.html">now</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0.45 Kb</td><td class="td-linebottomrt">0.38 Kb</td><td class="td-linebottomrt">0.09 Kb</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt">Self time (built-ins, overhead, etc.)</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">1.772 s</td><td class="td-linebottomrt">63896.75 Kb</td><td class="td-linebottomrt">62827.70 Kb</td><td class="td-linebottomrt">63982.78 Kb</td><td class="td-linebottomrt">0.6%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=1 height=10></td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Totals</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">286.237 s</td><td class="td-linebottomrt" bgcolor="#F0F0F0">46884512.56 Kb</td><td class="td-linebottomrt" bgcolor="#F0F0F0">46874646.50 Kb</td><td class="td-linebottomrt" bgcolor="#F0F0F0">63982.78 Kb</td><td class="td-linebottomrt" bgcolor="#F0F0F0">100%</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td></tr></table><div class="grayline"/><strong>Code Analyzer results</strong><br/>No Code Analyzer messages.<div class="grayline"/><strong>Coverage results</strong><br/>Show coverage for parent directory <br/><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Total lines in function</td><td class="td-linebottomrt">284</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Non-code lines (comments, blank lines)</td><td class="td-linebottomrt">91</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines (lines that can run)</td><td class="td-linebottomrt">193</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines that did run</td><td class="td-linebottomrt">81</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines that did not run</td><td class="td-linebottomrt">112</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Coverage (did run/can run)</td><td class="td-linebottomrt">41.97 %</td></tr></table><div class="grayline"/><b>Function listing</b><br/><table border = "0" cellpadding = "1" cellspacing = "5"><style> td,th { text-align:center; } .leftAligned{ text-align:left; }</style><tr><th><span style="color: #FF0000; font-weight: bold; text-decoration: none">time</span> </th><th><span style="color: #0000FF; font-weight: bold; text-decoration: none">calls</span> </th><th><span style="color: #20AF20; font-weight: bold; text-decoration: none">mem</span> </th><th class="leftAligned"><span style="font-weight: bold; text-decoration: none">  line</span></th></tr><tr><td></td><td></td><td> (1 call, 286.237 sec, 46884512.56 Kb, 46874646.50 Kb, 63982.78 Kb)</span><br/></td><td class="leftAligned"><pre><span style="color: #A0A0A0">   2</span> <span style="color: #A0A0A0; background: #FFFFFF;">function resultsmoviedata = CourtshipBowlMakeResultsMovie_GUI</span><br/></pre></td></tr><tr><td></td><td></td><td> (1 call, 286.237 sec, 46884512.56 Kb, 46874646.50 Kb, 63982.78 Kb)</span><br/></td><td class="leftAligned"><pre><span style="color: #A0A0A0">   3</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         96b/0b/96b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">   4</span> <span style="color: #000000; background: #FFFFFF;">version = '0.1.1'; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">    15k/9.55k/5.89k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">   5</span> <span style="color: #000000; background: #FFFFFF;">timestamp = <a href="file65.html">datestr</a>(<a href="file56.html">now</a>,<a href="file61.html">TimestampFormat</a>); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">   6</span> <span style="color: #000000; background: #FFFFFF;">expdir=getappdata(0,'expdir'); </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">          0b/32b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">   7</span> <span style="color: #000000; background: #FFFFFF;">experiment=getappdata(0,'experiment'); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">          0b/16b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">   8</span> <span style="color: #000000; background: #FFFFFF;">analysis_protocol=getappdata(0,'analysis_protocol'); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       144b/0b/144b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">   9</span> <span style="color: #000000; background: #FFFFFF;">cbparams = getappdata(0,'cbparams'); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       144b/0b/144b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  10</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     10.1k/0b/10.1k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  11</span> <span style="color: #000000; background: #FFFFFF;">resultsmoviedata = struct; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  12</span> <span style="color: #000000; background: #FFFFFF;">resultsmoviedata.cbresultsmovie_version = version; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  13</span> <span style="color: #000000; background: #FFFFFF;">resultsmoviedata.cbresultsmovie_timestamp = timestamp; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  14</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/4.17k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  15</span> <span style="color: #000000; background: #FFFFFF;">DEBUG=cbparams.track.DEBUG; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/4.17k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  16</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/4.17k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  17</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/4.17k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  18</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/4.17k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  19</span> <span style="color: #228B22; background: #FFFFFF;">%% movie parameters</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     5.77k/0b/5.77k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  20</span> <span style="color: #000000; background: #FFFFFF;">out=getappdata(0,'out'); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">   4.8k/3.39k/2.78k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  21</span> <span style="color: #000000; background: #FFFFFF;">cbparams.results_movie.tempdatadir=<a href="file44.html">fullfile</a>(out.folder,'temp_results_movie'); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       3.2k/0b/3.2k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  22</span> <span style="color: #000000; background: #FFFFFF;">resultsmovie_params = cbparams.results_movie; </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">   1.92k/3.16k/288b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  23</span> <span style="color: #000000; background: #FFFFFF;">defaulttempdatadir = <a href="file44.html">fullfile</a>(out.folder,'temp_results_movie'); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       112b/0b/112b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  24</span> <span style="color: #000000; background: #FFFFFF;">if ~isfield(resultsmovie_params,'tempdatadir'), </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       112b/0b/112b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  25</span> <span style="color: #A0A0A0; background: #FFFFFF;">  resultsmovie_params.tempdatadir = defaulttempdatadir;</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">1.01e+03b/2.09k/1.01e+03b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  26</span> <span style="color: #000000; background: #FFFFFF;">elseif <a href="file286.html">isunix</a> </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/4.17k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  27</span> <span style="color: #000000; background: #FFFFFF;">  [status1,res] = unix(sprintf('echo %s',resultsmovie_params.tempdatadir)); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/4.17k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  28</span> <span style="color: #000000; background: #FFFFFF;">  if status1 == 0, </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       944b/0b/944b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  29</span> <span style="color: #000000; background: #FFFFFF;">    resultsmovie_params.tempdatadir = strtrim(res); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       944b/0b/944b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  30</span> <span style="color: #000000; background: #FFFFFF;">  end </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       944b/0b/944b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  31</span> <span style="color: #000000; background: #FFFFFF;">end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       944b/0b/944b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  32</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">          0b/64b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  33</span> <span style="color: #000000; background: #FFFFFF;">if ~exist(resultsmovie_params.tempdatadir,'dir'), </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/64b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  34</span> <span style="color: #A0A0A0; background: #FFFFFF;">  [success1,msg1] = mkdir(resultsmovie_params.tempdatadir);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/64b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  35</span> <span style="color: #A0A0A0; background: #FFFFFF;">  if ~success1,</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/64b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  36</span> <span style="color: #A0A0A0; background: #FFFFFF;">    error('Error making directory %s: %s',resultsmovie_params.tempdatadir,msg1);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/64b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  37</span> <span style="color: #A0A0A0; background: #FFFFFF;">  end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/64b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  38</span> <span style="color: #A0A0A0; background: #FFFFFF;">end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/64b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  39</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/64b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  40</span> <span style="color: #228B22; background: #FFFFFF;">%% log file</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">    1.14k/80b/1.02k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  41</span> <span style="color: #000000; background: #FFFFFF;">logfid=<a href="file42.html">open_log</a>('resultsmovie_log',cbparams,out.folder); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">    1.14k/80b/1.02k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  42</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     12.1k/0b/12.1k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  43</span> <span style="color: #000000; background: #FFFFFF;">fprintf(logfid,'\n\n***\nRunning CourtshipBowlMakeResultsMovie version %s for experiment %s at %s\n',version,experiment,timestamp); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         0b/112b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  44</span> <span style="color: #000000; background: #FFFFFF;">resultsmoviedata.analysis_protocol = analysis_protocol; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/5.88k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  45</span> <span style="color: #000000; background: #FFFFFF;">resultsmoviedata.experiment=experiment; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/5.88k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  46</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/5.88k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  47</span> <span style="color: #228B22; background: #FFFFFF;">%% location of data</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/5.88k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  48</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.02 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">  95.2k/37.6k/50.2k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  49</span> <a name="Line49"></a><span style="color: #000000; background: #FFFFFF;">[~,basename] = <a href="file7.html">fileparts</a>(expdir); </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">  4.94k/4.38k/1.98k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  50</span> <span style="color: #000000; background: #FFFFFF;">moviefile = <a href="file44.html">fullfile</a>(expdir,cbparams.dataloc.movie.filestr); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">   1.64k/1.38k/288b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  51</span> <span style="color: #000000; background: #FFFFFF;">trxfile = <a href="file44.html">fullfile</a>(out.folder,cbparams.dataloc.trx.filestr); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     5.14k/0b/5.14k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  52</span> <span style="color: #000000; background: #FFFFFF;">avifilestr = sprintf('%s_%s',cbparams.dataloc.resultsavi.filestr,basename); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">    1.97k/1.5k/352b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  53</span> <span style="color: #000000; background: #FFFFFF;">avifile = <a href="file44.html">fullfile</a>(resultsmovie_params.tempdatadir,[avifilestr,'_temp.avi']); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">   1.78k/1.53k/304b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  54</span> <span style="color: #000000; background: #FFFFFF;">xvidfile = <a href="file44.html">fullfile</a>(out.folder,[avifilestr,'.avi']); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">   1.78k/1.53k/304b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  55</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">   1.78k/1.53k/304b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  56</span> <span style="color: #228B22; background: #FFFFFF;">%% read start and end of cropped trajectories</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">   1.78k/1.53k/304b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  57</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       112b/0b/112b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  58</span> <span style="color: #000000; background: #FFFFFF;">fprintf(logfid,'Reading in trajectories...\n'); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       112b/0b/112b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  59</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  1.61 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     61.3m/0b/61.3m </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  60</span> <a name="Line60"></a><span style="color: #000000; background: #FFFFFF;">load(trxfile,'trx'); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       224b/0b/224b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  61</span> <span style="color: #000000; background: #FFFFFF;">end_frame = max([trx.endframe]); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">          0b/24k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  62</span> <span style="color: #000000; background: #FFFFFF;">start_frame = min([trx.firstframe]); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  63</span> <span style="color: #000000; background: #FFFFFF;">nframes = end_frame-start_frame + 1; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     56.9k/0b/56.9k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  64</span> <span style="color: #000000; background: #FFFFFF;">nflies = numel(trx); </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         21k/0b/21k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  65</span> <span style="color: #000000; background: #FFFFFF;">if sum(resultsmovie_params.nframes)&gt;nframes </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         21k/0b/21k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  66</span> <span style="color: #A0A0A0; background: #FFFFFF;">    Dt=sum(resultsmovie_params.nframes)-nframes;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         21k/0b/21k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  67</span> <span style="color: #A0A0A0; background: #FFFFFF;">    D=ceil(resultsmovie_params.nframes*Dt/sum(resultsmovie_params.nframes));</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         21k/0b/21k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  68</span> <span style="color: #A0A0A0; background: #FFFFFF;">    resultsmovie_params.nframes=resultsmovie_params.nframes-D;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         21k/0b/21k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  69</span> <span style="color: #A0A0A0; background: #FFFFFF;">end</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  70</span> <span style="color: #000000; background: #FFFFFF;">firstframes_off = min(max(0,round(resultsmovie_params.firstframes*nframes)),nframes-1); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  71</span> <span style="color: #000000; background: #FFFFFF;">firstframes_off(resultsmovie_params.firstframes &lt; 0) = nan; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  72</span> <span style="color: #000000; background: #FFFFFF;">middleframes_off = round(resultsmovie_params.middleframes*nframes); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  73</span> <span style="color: #000000; background: #FFFFFF;">middleframes_off(resultsmovie_params.middleframes &lt; 0) = nan; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  74</span> <span style="color: #000000; background: #FFFFFF;">endframes_off = round(resultsmovie_params.endframes*nframes); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  75</span> <span style="color: #000000; background: #FFFFFF;">endframes_off(resultsmovie_params.endframes &lt; 0) = nan; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  76</span> <span style="color: #000000; background: #FFFFFF;">idx = ~isnan(middleframes_off); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  77</span> <span style="color: #000000; background: #FFFFFF;">firstframes_off(idx) = ... </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  78</span> <span style="color: #000000; background: #FFFFFF;">  min(nframes-1,max(0,middleframes_off(idx) - ceil(resultsmovie_params.nframes(idx)/2)));</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  79</span> <span style="color: #000000; background: #FFFFFF;">idx = ~isnan(endframes_off); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  80</span> <span style="color: #000000; background: #FFFFFF;">firstframes_off(idx) = ... </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  81</span> <span style="color: #000000; background: #FFFFFF;">  min(nframes-1,max(0,endframes_off(idx) - resultsmovie_params.nframes(idx)));</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  82</span> <span style="color: #000000; background: #FFFFFF;">endframes_off = firstframes_off + resultsmovie_params.nframes - 1; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  83</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  84</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  85</span> <span style="color: #000000; background: #FFFFFF;">firstframes = start_frame + firstframes_off; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  86</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  87</span> <span style="color: #228B22; background: #FFFFFF;">%% option to not specify nzoomr, nzoomc</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  88</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     28.2k/0b/28.2k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  89</span> <span style="color: #000000; background: #FFFFFF;">fprintf(logfid,'Setting parameters...\n'); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     28.2k/0b/28.2k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  90</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  91</span> <span style="color: #000000; background: #FFFFFF;">if ischar(resultsmovie_params.nzoomr) || ischar(resultsmovie_params.nzoomc), </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  92</span> <span style="color: #228B22; background: #FFFFFF;">    </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  93</span> <span style="color: #A0A0A0; background: #FFFFFF;">  if isnumeric(resultsmovie_params.nzoomr),</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  94</span> <span style="color: #A0A0A0; background: #FFFFFF;">    nzoomr = resultsmovie_params.nzoomr;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  95</span> <span style="color: #A0A0A0; background: #FFFFFF;">    nzoomc = round(nflies/nzoomr);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  96</span> <span style="color: #A0A0A0; background: #FFFFFF;">  elseif isnumeric(resultsmovie_params.nzoomc),</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  97</span> <span style="color: #A0A0A0; background: #FFFFFF;">    nzoomc = resultsmovie_params.nzoomc;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  98</span> <span style="color: #A0A0A0; background: #FFFFFF;">    nzoomr = round(nflies/nzoomc);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  99</span> <span style="color: #228B22; background: #FFFFFF;">  else</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 100</span> <span style="color: #A0A0A0; background: #FFFFFF;">    nzoomr = ceil(sqrt(nflies));</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 101</span> <span style="color: #A0A0A0; background: #FFFFFF;">    nzoomc = round(nflies/nzoomr);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 102</span> <span style="color: #A0A0A0; background: #FFFFFF;">  end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 103</span> <span style="color: #A0A0A0; background: #FFFFFF;">  resultsmovie_params.nzoomr = nzoomr;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 104</span> <span style="color: #A0A0A0; background: #FFFFFF;">  resultsmovie_params.nzoomc = nzoomc;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 105</span> <span style="color: #228B22; background: #FFFFFF;">  </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 106</span> <span style="color: #A0A0A0; background: #FFFFFF;">  if iscell(resultsmovie_params.figpos),  </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 107</span> <span style="color: #A0A0A0; background: #FFFFFF;">    [readframe,~,fid] = get_readframe_fcn(moviefile);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 108</span> <span style="color: #A0A0A0; background: #FFFFFF;">    im = readframe(1);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 109</span> <span style="color: #A0A0A0; background: #FFFFFF;">    [nr,nc,~] = size(im);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 110</span> <span style="color: #228B22; background: #FFFFFF;">    </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 111</span> <span style="color: #A0A0A0; background: #FFFFFF;">    rowszoom = floor(nr/nzoomr);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 112</span> <span style="color: #A0A0A0; background: #FFFFFF;">    imsize = [nr,nc+rowszoom*nzoomc];</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 113</span> <span style="color: #A0A0A0; background: #FFFFFF;">    figpos = str2double(resultsmovie_params.figpos);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 114</span> <span style="color: #A0A0A0; background: #FFFFFF;">    if isnan(figpos(3)),</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 115</span> <span style="color: #A0A0A0; background: #FFFFFF;">      figpos(3) = figpos(4)*imsize(2)/imsize(1);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 116</span> <span style="color: #A0A0A0; background: #FFFFFF;">    elseif isnan(figpos(4)),</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 117</span> <span style="color: #A0A0A0; background: #FFFFFF;">      figpos(4) = figpos(3)*imsize(1)/imsize(2);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 118</span> <span style="color: #A0A0A0; background: #FFFFFF;">    end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 119</span> <span style="color: #A0A0A0; background: #FFFFFF;">    resultsmovie_params.figpos = figpos;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 120</span> <span style="color: #228B22; background: #FFFFFF;">    </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 121</span> <span style="color: #A0A0A0; background: #FFFFFF;">    if fid &gt; 1,</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 122</span> <span style="color: #A0A0A0; background: #FFFFFF;">      fclose(fid);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 123</span> <span style="color: #A0A0A0; background: #FFFFFF;">    end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 124</span> <span style="color: #A0A0A0; background: #FFFFFF;">  end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 125</span> <span style="color: #228B22; background: #FFFFFF;">  </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 126</span> <span style="color: #228B22; background: #FFFFFF;">  </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 127</span> <span style="color: #228B22; background: #FFFFFF;">  </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 128</span> <span style="color: #A0A0A0; background: #FFFFFF;">end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 129</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 130</span> <span style="color: #228B22; background: #FFFFFF;">%% choose colors for each fly</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 131</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/28.4k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 132</span> <span style="color: #000000; background: #FFFFFF;">fprintf(logfid,'Choosing colors for each fly...\n'); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/28.4k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 133</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">  19.8k/3.09k/11.3k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 134</span> <span style="color: #000000; background: #FFFFFF;">colors = <a href="file287.html">jet</a>(nflies)*.8; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  19.8k/3.09k/11.3k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 135</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  19.8k/3.09k/11.3k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 136</span> <span style="color: #228B22; background: #FFFFFF;">% alone flies go in the middle</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         64b/0b/64b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 137</span> <span style="color: #000000; background: #FFFFFF;">isalone = false(1,nflies); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       240b/0b/240b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 138</span> <span style="color: #000000; background: #FFFFFF;">maxroi = max([trx.roi]); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       304b/0b/304b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 139</span> <span style="color: #000000; background: #FFFFFF;">for roii = 1:maxroi, </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">     4.39k/0b/4.16k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 140</span> <span style="color: #000000; background: #FFFFFF;">  idx = [trx.roi] == roii; </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">         0b/240b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 141</span> <span style="color: #000000; background: #FFFFFF;">  if nnz(idx) == 1, </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         0b/240b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 142</span> <span style="color: #A0A0A0; background: #FFFFFF;">    isalone(idx) = true;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         0b/240b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 143</span> <span style="color: #A0A0A0; background: #FFFFFF;">  end</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">     1.02k/0b/1.02k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 144</span> <span style="color: #000000; background: #FFFFFF;">end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.02k/0b/1.02k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 145</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     13.9k/0b/13.9k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 146</span> <span style="color: #000000; background: #FFFFFF;">nalone = nnz(isalone); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     13.9k/0b/13.9k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 147</span> <span style="color: #000000; background: #FFFFFF;">npairs = (nflies - nalone)/2; </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     13.9k/0b/13.9k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 148</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       528b/0b/528b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 149</span> <span style="color: #000000; background: #FFFFFF;">colorsp1 = colors(1:npairs,:); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 150</span> <span style="color: #000000; background: #FFFFFF;">colorsalone = colors(npairs+1:npairs+nalone,:); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       512b/0b/512b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 151</span> <span style="color: #000000; background: #FFFFFF;">colorsp2 = colors(npairs+nalone+1:end,:); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       512b/0b/512b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 152</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       512b/0b/512b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 153</span> <span style="color: #000000; background: #FFFFFF;">ip = 1; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       144b/0b/144b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 154</span> <span style="color: #000000; background: #FFFFFF;">ialone = 1; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         16b/0b/16b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 155</span> <span style="color: #000000; background: #FFFFFF;">for roii = 1:maxroi, </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">  4.97k/5.55k/2.56k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 156</span> <span style="color: #000000; background: #FFFFFF;">  idx = find([trx.roi] == roii); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">    34.1k/18.4k/16k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 157</span> <span style="color: #000000; background: #FFFFFF;">  if nnz(idx) == 0, </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">    34.1k/18.4k/16k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 158</span> <span style="color: #A0A0A0; background: #FFFFFF;">    continue;</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">      18.7k/48b/16k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 159</span> <span style="color: #000000; background: #FFFFFF;">  elseif numel(idx) == 1, </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">      18.7k/48b/16k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 160</span> <span style="color: #A0A0A0; background: #FFFFFF;">    colors(idx,:) = colorsalone(ialone,:);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">      18.7k/48b/16k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 161</span> <span style="color: #A0A0A0; background: #FFFFFF;">    ialone = ialone+1;</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">     416b/128b/272b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 162</span> <span style="color: #228B22; background: #FFFFFF;">  else </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">   2.94k/432b/2.14k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 163</span> <span style="color: #000000; background: #FFFFFF;">    colors(idx(1),:) = colorsp1(ip,:); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">      784b/16b/384b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 164</span> <span style="color: #000000; background: #FFFFFF;">    colors(idx(2),:) = colorsp2(ip,:); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">       272b/64b/80b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 165</span> <span style="color: #000000; background: #FFFFFF;">    ip = ip+1; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">     448b/160b/192b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 166</span> <span style="color: #000000; background: #FFFFFF;">  end </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">     16 </span></td><td><span style="color: #20AF20">      496b/48b/208b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 167</span> <span style="color: #000000; background: #FFFFFF;">end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">      496b/48b/208b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 168</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">      496b/48b/208b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 169</span> <span style="color: #228B22; background: #FFFFFF;">%% create movie</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">      496b/48b/208b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 170</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     26.5k/0b/26.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 171</span> <a name="Line171"></a><span style="color: #000000; background: #FFFFFF;">fprintf(logfid,'Calling make_ctrax_results_movie...\n'); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     26.5k/0b/26.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 172</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/25.5k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 173</span> <a name="Line173"></a><span style="color: #000000; background: #FFFFFF;">if ~DEBUG &amp;&amp; exist(avifile,'file'), </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/25.5k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 174</span> <span style="color: #A0A0A0; background: #FFFFFF;">  try</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/25.5k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 175</span> <span style="color: #A0A0A0; background: #FFFFFF;">    delete(avifile);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/25.5k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 176</span> <span style="color: #A0A0A0; background: #FFFFFF;">  catch ME,</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/25.5k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 177</span> <span style="color: #A0A0A0; background: #FFFFFF;">    fprintf(logfid,'Could not remove avi file %s:\n%s\n',avifile,getReport(ME));</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/25.5k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 178</span> <span style="color: #A0A0A0; background: #FFFFFF;">  end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/25.5k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 179</span> <span style="color: #A0A0A0; background: #FFFFFF;">end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/25.5k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 180</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td><span style="color: #FF0000"> 284.48 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 181</span> <a name="Line181"></a><span style="color: #000000; background: #FF8080;">[succeeded,~,~,height,width]= ... </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 182</span> <span style="color: #000000; background: #FF8080;">  make_ctrax_result_movie_GUI('moviename',moviefile,'trxname',trxfile,'aviname',avifile,...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 183</span> <span style="color: #000000; background: #FF8080;">  'nzoomr',resultsmovie_params.nzoomr,'nzoomc',resultsmovie_params.nzoomc,...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 184</span> <span style="color: #000000; background: #FF8080;">  'boxradius',resultsmovie_params.boxradius,'taillength',resultsmovie_params.taillength,...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 185</span> <span style="color: #000000; background: #FF8080;">  'fps',resultsmovie_params.fps,...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 186</span> <span style="color: #000000; background: #FF8080;">  'maxnframes',resultsmovie_params.nframes,...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 187</span> <span style="color: #000000; background: #FF8080;">  'firstframes',firstframes,...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 188</span> <span style="color: #000000; background: #FF8080;">  'figpos',resultsmovie_params.figpos,...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 189</span> <span style="color: #000000; background: #FF8080;">  'movietitle',basename,...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 190</span> <span style="color: #000000; background: #FF8080;">  'compression','none',...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 191</span> <span style="color: #000000; background: #FF8080;">  'useVideoWriter',false,...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 192</span> <span style="color: #000000; background: #FF8080;">  'titletext',false,...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 193</span> <span style="color: #000000; background: #FF8080;">  'avifileTempDataFile',[avifile,'-temp'],...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 194</span> <span style="color: #000000; background: #FF8080;">  'dynamicflyselection',true,...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 195</span> <span style="color: #000000; background: #FF8080;">  'doshowsex',true,...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 196</span> <span style="color: #000000; background: #FF8080;">  'colors',colors);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 197</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 198</span> <span style="color: #A0A0A0; background: #FFFFFF;">if ishandle(1),</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 199</span> <span style="color: #A0A0A0; background: #FFFFFF;">  close(1);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 200</span> <span style="color: #A0A0A0; background: #FFFFFF;">end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 201</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 202</span> <span style="color: #A0A0A0; background: #FFFFFF;">if ~succeeded,</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 203</span> <span style="color: #A0A0A0; background: #FFFFFF;">  error('Failed to create raw avi %s',avifile);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 204</span> <span style="color: #A0A0A0; background: #FFFFFF;">end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 205</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 206</span> <span style="color: #228B22; background: #FFFFFF;">%% create subtitle file</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 207</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 208</span> <span style="color: #A0A0A0; background: #FFFFFF;">fprintf(logfid,'Creating subtitle file...\n');</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 209</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 210</span> <span style="color: #A0A0A0; background: #FFFFFF;">subtitlefile = fullfile(out.folder,'subtitles.srt');</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 211</span> <span style="color: #A0A0A0; background: #FFFFFF;">fid = fopen(subtitlefile,'w');</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 212</span> <span style="color: #A0A0A0; background: #FFFFFF;">dt = [0,resultsmovie_params.nframes];</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 213</span> <span style="color: #A0A0A0; background: #FFFFFF;">ts = cumsum(dt);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 214</span> <span style="color: #A0A0A0; background: #FFFFFF;">for i = 1:numel(dt)-1,</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 215</span> <span style="color: #A0A0A0; background: #FFFFFF;">  fprintf(fid,'%d\n',i);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 216</span> <span style="color: #A0A0A0; background: #FFFFFF;">  fprintf(fid,'%s --&gt; %s\n',...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 217</span> <span style="color: #A0A0A0; background: #FFFFFF;">    datestr(ts(i)/resultsmovie_params.fps/(3600*24),'HH:MM:SS,FFF'),...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 218</span> <span style="color: #A0A0A0; background: #FFFFFF;">    datestr((ts(i+1)-1)/resultsmovie_params.fps/(3600*24),'HH:MM:SS,FFF'));</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 219</span> <span style="color: #A0A0A0; background: #FFFFFF;">  fprintf(fid,'%s, fr %d-%d\n\n',basename,...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 220</span> <span style="color: #A0A0A0; background: #FFFFFF;">    firstframes_off(i)+1,...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 221</span> <span style="color: #A0A0A0; background: #FFFFFF;">    endframes_off(i)+1);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 222</span> <span style="color: #A0A0A0; background: #FFFFFF;">end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 223</span> <span style="color: #A0A0A0; background: #FFFFFF;">fclose(fid);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 224</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 225</span> <span style="color: #228B22; background: #FFFFFF;">%% compress</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 226</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 227</span> <span style="color: #A0A0A0; background: #FFFFFF;">fprintf(logfid,'Compressing to xvid avi file...\n');</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 228</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 229</span> <span style="color: #A0A0A0; background: #FFFFFF;">tmpfile = [xvidfile,'.tmp'];</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 230</span> <span style="color: #A0A0A0; background: #FFFFFF;">newheight = 4*ceil(height/4);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 231</span> <span style="color: #A0A0A0; background: #FFFFFF;">newwidth = 4*ceil(width/4);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 232</span> <span style="color: #228B22; background: #FFFFFF;">% subtitles are upside down, so encode with subtitles and flip, then flip</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 233</span> <span style="color: #228B22; background: #FFFFFF;">% again</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 234</span> <span style="color: #A0A0A0; background: #FFFFFF;">cmd = sprintf('mencoder %s -o %s -ovc xvid -xvidencopts fixed_quant=4 -vf scale=%d:%d,flip -sub %s -subfont-text-scale 2 -msglevel all=2',...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 235</span> <span style="color: #A0A0A0; background: #FFFFFF;">  avifile,tmpfile,newwidth,newheight,subtitlefile);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 236</span> <span style="color: #A0A0A0; background: #FFFFFF;">status = system(cmd);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 237</span> <span style="color: #A0A0A0; background: #FFFFFF;">if status ~= 0,</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 238</span> <span style="color: #A0A0A0; background: #FFFFFF;">  fprintf('*****\n');</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 239</span> <span style="color: #A0A0A0; background: #FFFFFF;">  warning('Failed to compress avi to %s',xvidfile);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 240</span> <span style="color: #A0A0A0; background: #FFFFFF;">  fprintf('Need to run:\n');</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 241</span> <span style="color: #A0A0A0; background: #FFFFFF;">  fprintf('%s\n',cmd);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 242</span> <span style="color: #A0A0A0; background: #FFFFFF;">  cmd2 = sprintf('mencoder %s -o %s -ovc xvid -xvidencopts fixed_quant=4 -vf flip -msglevel all=2',...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 243</span> <span style="color: #A0A0A0; background: #FFFFFF;">    tmpfile,xvidfile);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 244</span> <span style="color: #A0A0A0; background: #FFFFFF;">  fprintf('then\n');</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 245</span> <span style="color: #A0A0A0; background: #FFFFFF;">  fprintf('%s\n',cmd2);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 246</span> <span style="color: #A0A0A0; background: #FFFFFF;">  fprintf('then delete %s %s %s\n',tmpfile,avifile,subtitlefile);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 247</span> <span style="color: #A0A0A0; background: #FFFFFF;">  fprintf('*****\n');</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 248</span> <span style="color: #228B22; background: #FFFFFF;">else</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 249</span> <span style="color: #A0A0A0; background: #FFFFFF;">  cmd = sprintf('mencoder %s -o %s -ovc xvid -xvidencopts fixed_quant=4 -vf flip -msglevel all=2',...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 250</span> <span style="color: #A0A0A0; background: #FFFFFF;">    tmpfile,xvidfile);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 251</span> <span style="color: #A0A0A0; background: #FFFFFF;">  status = system(cmd);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 252</span> <span style="color: #A0A0A0; background: #FFFFFF;">  if status ~= 0,</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 253</span> <span style="color: #A0A0A0; background: #FFFFFF;">    fprintf('*****\n');</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 254</span> <span style="color: #A0A0A0; background: #FFFFFF;">    warning('Failed to add subtitles to %s',xvidfile);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 255</span> <span style="color: #A0A0A0; background: #FFFFFF;">    fprintf('Need to run:\n');</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 256</span> <span style="color: #A0A0A0; background: #FFFFFF;">    fprintf('%s\n',cmd);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 257</span> <span style="color: #A0A0A0; background: #FFFFFF;">    fprintf('then delete %s %s %s\n',tmpfile,avifile,subtitlefile);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 258</span> <span style="color: #A0A0A0; background: #FFFFFF;">    fprintf('*****\n');    </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 259</span> <span style="color: #228B22; background: #FFFFFF;">  else</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 260</span> <span style="color: #A0A0A0; background: #FFFFFF;">    delete(tmpfile);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 261</span> <span style="color: #A0A0A0; background: #FFFFFF;">    delete(avifile);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 262</span> <span style="color: #A0A0A0; background: #FFFFFF;">    delete(subtitlefile);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 263</span> <span style="color: #A0A0A0; background: #FFFFFF;">  end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 264</span> <span style="color: #A0A0A0; background: #FFFFFF;">end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 265</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 266</span> <span style="color: #228B22; background: #FFFFFF;">%% save info to mat file</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 267</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 268</span> <span style="color: #A0A0A0; background: #FFFFFF;">resultsmoviedata.resultsmovie_params = resultsmovie_params;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 269</span> <span style="color: #A0A0A0; background: #FFFFFF;">resultsmoviedata.firstframes = firstframes;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 270</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 271</span> <span style="color: #A0A0A0; background: #FFFFFF;">filename = fullfile(out.folder,cbparams.dataloc.resultsmoviedatamat.filestr);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 272</span> <span style="color: #A0A0A0; background: #FFFFFF;">fprintf(logfid,'Saving info to mat file %s...\n',filename);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 273</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 274</span> <span style="color: #A0A0A0; background: #FFFFFF;">if exist(filename,'file'),</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 275</span> <span style="color: #A0A0A0; background: #FFFFFF;">  delete(filename);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 276</span> <span style="color: #A0A0A0; background: #FFFFFF;">end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 277</span> <span style="color: #A0A0A0; background: #FFFFFF;">save(filename,'-struct','resultsmoviedata');</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 278</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 279</span> <span style="color: #228B22; background: #FFFFFF;">%% close log</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 280</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 281</span> <span style="color: #A0A0A0; background: #FFFFFF;">fprintf(logfid,'Finished running CourtshipBowlMakeResultsMovie at %s for experiment %s.\n',datestr(now,'yyyymmddTHHMMSS'),experiment);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 282</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 283</span> <span style="color: #A0A0A0; background: #FFFFFF;">if logfid &gt; 1,</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 284</span> <span style="color: #A0A0A0; background: #FFFFFF;">  fclose(logfid);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  44.7g/44.6g/62.5m </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 285</span> <span style="color: #A0A0A0; background: #FFFFFF;">end</span><br/></pre></td></tr></table></body></html>