<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" /><link rel="stylesheet" href="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/matlab-report-styles.css" type="text/css" /><title>Function details for avifile.close</title><link rel="stylesheet" href="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/matlab-report-styles.css" type="text/css" /></head><body bgcolor="#F8F8F8"><strong>This is a static copy of a profile report</strong><p><a href="file0.html">Home</a><p><span style="font-size:14pt; background:#FFE4B0">avifile.close (1 call, 65.774 sec, 707460.62 Kb, 706983.19 Kb, 5447.53 Kb)</span><br/><i>Generated 03-Apr-2014 11:11:55 using cpu time.</i><br/>function in file /Applications/MATLAB_R2013b.app/toolbox/matlab/audiovideo/@avifile/close.m<br/>Copy to new window for comparing multiple runs<div class="grayline"/><div class="grayline"/><strong>Parents</strong> (calling functions)<br/><p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Name</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Type</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td></tr><tr><td class="td-linebottomrt"><a href="file8.html">make_ctrax_result_movie_GUI</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td></tr></table><div class="grayline"/><strong>Lines where the most time was spent</strong><br/> <p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Line Number</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Code</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Total Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Allocated Memory</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Freed Memory</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Peak Memory</td><td class="td-linebottomrt" bgcolor="#F0F0F0">% Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Time Plot</td></tr><tr><td class="td-linebottomrt"><a href="#Line106">106</a></td><td class="td-linebottomrt"><pre>[offsets(i), pad]  = WriteUnco...</pre></td><td class="td-linebottomrt">758</td><td class="td-linebottomrt">53.791 s</td><td class="td-linebottomrt">700.77 Kb</td><td class="td-linebottomrt">44118.06 Kb</td><td class="td-linebottomrt">36.72 Kb</td><td class="td-linebottomrt" class="td-linebottomrt">81.8%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=82 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line104">104</a></td><td class="td-linebottomrt"><pre>data = fread(TempDataFile,Chun...</pre></td><td class="td-linebottomrt">758</td><td class="td-linebottomrt">11.900 s</td><td class="td-linebottomrt">706272.19 Kb</td><td class="td-linebottomrt">655531.11 Kb</td><td class="td-linebottomrt">5447.53 Kb</td><td class="td-linebottomrt" class="td-linebottomrt">18.1%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=18 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line105">105</a></td><td class="td-linebottomrt"><pre>if aviobj.Compression == 0</pre></td><td class="td-linebottomrt">758</td><td class="td-linebottomrt">0.033 s</td><td class="td-linebottomrt">0.12 Kb</td><td class="td-linebottomrt">67.94 Kb</td><td class="td-linebottomrt">0.03 Kb</td><td class="td-linebottomrt" class="td-linebottomrt">0.1%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line103">103</a></td><td class="td-linebottomrt"><pre>ChunkSizes(i) = fread(TempData...</pre></td><td class="td-linebottomrt">758</td><td class="td-linebottomrt">0.011 s</td><td class="td-linebottomrt">0.55 Kb</td><td class="td-linebottomrt">1.48 Kb</td><td class="td-linebottomrt">0.55 Kb</td><td class="td-linebottomrt" class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line102">102</a></td><td class="td-linebottomrt"><pre>chunkid = fread(TempDataFile,4...</pre></td><td class="td-linebottomrt">758</td><td class="td-linebottomrt">0.011 s</td><td class="td-linebottomrt">29.03 Kb</td><td class="td-linebottomrt">0.20 Kb</td><td class="td-linebottomrt">4.62 Kb</td><td class="td-linebottomrt" class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt">All other lines</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">0.028 s</td><td class="td-linebottomrt">457.97 Kb</td><td class="td-linebottomrt">7264.39 Kb</td><td class="td-linebottomrt">5447.53 Kb</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Totals</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">65.774 s</td><td class="td-linebottomrt" bgcolor="#F0F0F0">707460.62 Kb</td><td class="td-linebottomrt" bgcolor="#F0F0F0">706983.19 Kb</td><td class="td-linebottomrt" bgcolor="#F0F0F0">5447.53 Kb</td><td class="td-linebottomrt" bgcolor="#F0F0F0">100%</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td></tr></table><div class="grayline"/><b>Children</b> (called functions)<br/><p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Name</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Type</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Total Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Allocated Memory</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Freed Memory</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Peak Memory</td><td class="td-linebottomrt" bgcolor="#F0F0F0">% Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Time Plot</td></tr><tr><td class="td-linebottomrt"><a href="file348.html">avifile.close>WriteUncompressedData</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">758</td><td class="td-linebottomrt">53.757 s</td><td class="td-linebottomrt">698.16 Kb</td><td class="td-linebottomrt">44057.86 Kb</td><td class="td-linebottomrt">36.72 Kb</td><td class="td-linebottomrt">81.7%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=82 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file343.html">avifile.close>WriteChunk</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">5</td><td class="td-linebottomrt">0.011 s</td><td class="td-linebottomrt">70.05 Kb</td><td class="td-linebottomrt">14.34 Kb</td><td class="td-linebottomrt">29.78 Kb</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file347.html">avifile.close>WriteBMPHeader</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.006 s</td><td class="td-linebottomrt">63.91 Kb</td><td class="td-linebottomrt">17.11 Kb</td><td class="td-linebottomrt">24.45 Kb</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file350.html">avifile.close>fwriteWithCheck</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">3</td><td class="td-linebottomrt">0.006 s</td><td class="td-linebottomrt">14.77 Kb</td><td class="td-linebottomrt">0.45 Kb</td><td class="td-linebottomrt">5.91 Kb</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file346.html">avifile.close>WriteSTRH</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">52.47 Kb</td><td class="td-linebottomrt">4.42 Kb</td><td class="td-linebottomrt">46.03 Kb</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file345.html">avifile.close>WriteAVIH</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">91.25 Kb</td><td class="td-linebottomrt">2.39 Kb</td><td class="td-linebottomrt">33.28 Kb</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file344.html">avifile.close>WriteList</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">3</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">34.05 Kb</td><td class="td-linebottomrt">20.77 Kb</td><td class="td-linebottomrt">17.02 Kb</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file286.html">isunix</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0.05 Kb</td><td class="td-linebottomrt">0.00 Kb</td><td class="td-linebottomrt">0.03 Kb</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt">Self time (built-ins, overhead, etc.)</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">11.995 s</td><td class="td-linebottomrt">706435.94 Kb</td><td class="td-linebottomrt">662865.84 Kb</td><td class="td-linebottomrt">5447.53 Kb</td><td class="td-linebottomrt">18.2%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB_R2013b.app/toolbox/matlab/codetools/private/one-pixel.gif" width=18 height=10></td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Totals</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">65.774 s</td><td class="td-linebottomrt" bgcolor="#F0F0F0">707460.62 Kb</td><td class="td-linebottomrt" bgcolor="#F0F0F0">706983.19 Kb</td><td class="td-linebottomrt" bgcolor="#F0F0F0">5447.53 Kb</td><td class="td-linebottomrt" bgcolor="#F0F0F0">100%</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td></tr></table><div class="grayline"/><strong>Code Analyzer results</strong><br/><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Line number</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Message</td></tr><tr><td class="td-linebottomrt"><a href="#Line17">17</a></td><td class="td-linebottomrt"><span class="mono">Use NARGOUTCHK without ERROR.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line50">50</a></td><td class="td-linebottomrt"><span class="mono">The value assigned to variable 'count' might be unused.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line102">102</a></td><td class="td-linebottomrt"><span class="mono">The value assigned to variable 'chunkid' might be unused.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line106">106</a></td><td class="td-linebottomrt"><span class="mono">The value assigned to variable 'pad' might be unused.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line108">108</a></td><td class="td-linebottomrt"><span class="mono">The value assigned to variable 'pad' might be unused.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line124">124</a></td><td class="td-linebottomrt"><span class="mono">The value assigned to variable 'count' might be unused.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line125">125</a></td><td class="td-linebottomrt"><span class="mono">The value assigned to variable 'count' might be unused.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line126">126</a></td><td class="td-linebottomrt"><span class="mono">The value assigned to variable 'count' might be unused.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line127">127</a></td><td class="td-linebottomrt"><span class="mono">The value assigned to variable 'count' might be unused.</span></td></tr></table><div class="grayline"/><strong>Coverage results</strong><br/>Show coverage for parent directory <br/><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Total lines in function</td><td class="td-linebottomrt">137</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Non-code lines (comments, blank lines)</td><td class="td-linebottomrt">57</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines (lines that can run)</td><td class="td-linebottomrt">80</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines that did run</td><td class="td-linebottomrt">40</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines that did not run</td><td class="td-linebottomrt">40</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Coverage (did run/can run)</td><td class="td-linebottomrt">50.00 %</td></tr></table><div class="grayline"/><b>Function listing</b><br/><table border = "0" cellpadding = "1" cellspacing = "5"><style> td,th { text-align:center; } .leftAligned{ text-align:left; }</style><tr><th><span style="color: #FF0000; font-weight: bold; text-decoration: none">time</span> </th><th><span style="color: #0000FF; font-weight: bold; text-decoration: none">calls</span> </th><th><span style="color: #20AF20; font-weight: bold; text-decoration: none">mem</span> </th><th class="leftAligned"><span style="font-weight: bold; text-decoration: none">  line</span></th></tr><tr><td></td><td></td><td> (1 call, 65.774 sec, 707460.62 Kb, 706983.19 Kb, 5447.53 Kb)</span><br/></td><td class="leftAligned"><pre><span style="color: #A0A0A0">   1</span> <span style="color: #A0A0A0; background: #FFFFFF;">function aviobj = close(aviobj)</span><br/></pre></td></tr><tr><td></td><td></td><td> (1 call, 65.774 sec, 707460.62 Kb, 706983.19 Kb, 5447.53 Kb)</span><br/></td><td class="leftAligned"><pre><span style="color: #A0A0A0">   2</span> <span style="color: #228B22; background: #FFFFFF;">%CLOSE Finish writing and close AVI file.</span><br/></pre></td></tr><tr><td></td><td></td><td> (1 call, 65.774 sec, 707460.62 Kb, 706983.19 Kb, 5447.53 Kb)</span><br/></td><td class="leftAligned"><pre><span style="color: #A0A0A0">   3</span> <span style="color: #228B22; background: #FFFFFF;">%   AVIFILE will be removed in a future release. Use VIDEOWRITER instead.</span><br/></pre></td></tr><tr><td></td><td></td><td> (1 call, 65.774 sec, 707460.62 Kb, 706983.19 Kb, 5447.53 Kb)</span><br/></td><td class="leftAligned"><pre><span style="color: #A0A0A0">   4</span> <span style="color: #228B22; background: #FFFFFF;">%</span><br/></pre></td></tr><tr><td></td><td></td><td> (1 call, 65.774 sec, 707460.62 Kb, 706983.19 Kb, 5447.53 Kb)</span><br/></td><td class="leftAligned"><pre><span style="color: #A0A0A0">   5</span> <span style="color: #228B22; background: #FFFFFF;">%   AVIOBJ = CLOSE(AVIOBJ) finishes writing and closes the AVI file</span><br/></pre></td></tr><tr><td></td><td></td><td> (1 call, 65.774 sec, 707460.62 Kb, 706983.19 Kb, 5447.53 Kb)</span><br/></td><td class="leftAligned"><pre><span style="color: #A0A0A0">   6</span> <span style="color: #228B22; background: #FFFFFF;">%   associated with AVIOBJ, which is an AVIFILE object obtained from</span><br/></pre></td></tr><tr><td></td><td></td><td> (1 call, 65.774 sec, 707460.62 Kb, 706983.19 Kb, 5447.53 Kb)</span><br/></td><td class="leftAligned"><pre><span style="color: #A0A0A0">   7</span> <span style="color: #228B22; background: #FFFFFF;">%   AVIFILE.  </span><br/></pre></td></tr><tr><td></td><td></td><td> (1 call, 65.774 sec, 707460.62 Kb, 706983.19 Kb, 5447.53 Kb)</span><br/></td><td class="leftAligned"><pre><span style="color: #A0A0A0">   8</span> <span style="color: #228B22; background: #FFFFFF;">%</span><br/></pre></td></tr><tr><td></td><td></td><td> (1 call, 65.774 sec, 707460.62 Kb, 706983.19 Kb, 5447.53 Kb)</span><br/></td><td class="leftAligned"><pre><span style="color: #A0A0A0">   9</span> <span style="color: #228B22; background: #FFFFFF;">%   See also VIDEOWRITER, MOVIE2AVI.</span><br/></pre></td></tr><tr><td></td><td></td><td> (1 call, 65.774 sec, 707460.62 Kb, 706983.19 Kb, 5447.53 Kb)</span><br/></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  10</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td> (1 call, 65.774 sec, 707460.62 Kb, 706983.19 Kb, 5447.53 Kb)</span><br/></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  11</span> <span style="color: #228B22; background: #FFFFFF;">%   Copyright 1984-2013 The MathWorks, Inc.</span><br/></pre></td></tr><tr><td></td><td></td><td> (1 call, 65.774 sec, 707460.62 Kb, 706983.19 Kb, 5447.53 Kb)</span><br/></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  12</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">        0b/4.95k/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  13</span> <span style="color: #000000; background: #FFFFFF;">if ~isa(aviobj,'avifile') </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/4.95k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  14</span> <span style="color: #A0A0A0; background: #FFFFFF;">   error(message('MATLAB:audiovideo:aviclose:invalidInputArgument'));</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/4.95k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  15</span> <span style="color: #A0A0A0; background: #FFFFFF;">end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">        0b/4.95k/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  16</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><a name="Line17"></a><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         96b/0b/96b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  17</span> <span style="color: #000000; background: #FFFFFF;">error(nargoutchk(1,1,nargout)); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         96b/0b/96b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  18</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     1.42k/0b/1.42k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  19</span> <span style="color: #000000; background: #FFFFFF;">if aviobj.MainHeader.TotalFrames == 0 </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.42k/0b/1.42k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  20</span> <span style="color: #A0A0A0; background: #FFFFFF;">  warning(message('MATLAB:audiovideo:aviclose:noAssociatedFrames'));</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.42k/0b/1.42k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  21</span> <span style="color: #A0A0A0; background: #FFFFFF;">end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.42k/0b/1.42k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  22</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         48b/0b/48b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  23</span> <span style="color: #000000; background: #FFFFFF;">ColormapSize = 0; </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     1.52k/0b/1.52k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  24</span> <span style="color: #000000; background: #FFFFFF;">if aviobj.Bitmapheader.biBitCount == 8 </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.52k/0b/1.52k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  25</span> <span style="color: #A0A0A0; background: #FFFFFF;">  ColormapSize =size(aviobj.Bitmapheader.Colormap,1)* ...</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.52k/0b/1.52k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  26</span> <span style="color: #A0A0A0; background: #FFFFFF;">      (size(aviobj.Bitmapheader.Colormap,2));</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.52k/0b/1.52k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  27</span> <span style="color: #A0A0A0; background: #FFFFFF;">end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     1.52k/0b/1.52k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  28</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       432b/0b/384b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  29</span> <span style="color: #000000; background: #FFFFFF;">if <a href="file286.html">isunix</a> </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       432b/0b/384b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  30</span> <span style="color: #228B22; background: #FFFFFF;">  % If frames are 8-bit indexed images, add the colormap size to the strf</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       432b/0b/384b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  31</span> <span style="color: #228B22; background: #FFFFFF;">  % chunk, RIFF chunk, and strl LIST</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       224b/0b/224b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  32</span> <span style="color: #000000; background: #FFFFFF;">  aviobj.Sizes.strfsize =aviobj.Sizes.strfsize + ... </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       224b/0b/224b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  33</span> <span style="color: #000000; background: #FFFFFF;">      ColormapSize;</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       784b/0b/784b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  34</span> <span style="color: #000000; background: #FFFFFF;">  aviobj.Sizes.riffsize = aviobj.Sizes.riffsize + ColormapSize ... </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       784b/0b/784b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  35</span> <span style="color: #000000; background: #FFFFFF;">      +aviobj.Sizes.strnsize + rem(aviobj.Sizes.strnsize,2);</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">          0b/16b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  36</span> <span style="color: #000000; background: #FFFFFF;">  aviobj.Sizes.hdrllist = aviobj.Sizes.hdrllist + ColormapSize ... </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/16b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  37</span> <span style="color: #000000; background: #FFFFFF;">      +aviobj.Sizes.strnsize +  rem(aviobj.Sizes.strnsize,2);</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">          0b/16b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  38</span> <span style="color: #000000; background: #FFFFFF;">  aviobj.Sizes.strllist = aviobj.Sizes.strllist + ColormapSize ... </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/16b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  39</span> <span style="color: #000000; background: #FFFFFF;">      +aviobj.Sizes.strnsize +  rem(aviobj.Sizes.strnsize,2);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/16b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  40</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       864b/0b/864b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  41</span> <span style="color: #000000; background: #FFFFFF;">  fid = fopen(aviobj.Filename,'wb','l'); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  42</span> <span style="color: #000000; background: #FFFFFF;">  if fid == -1 </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  43</span> <span style="color: #A0A0A0; background: #FFFFFF;">    error(message('MATLAB:audiovideo:aviclose:unableToWriteToFile', aviobj.Filename));</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  44</span> <span style="color: #A0A0A0; background: #FFFFFF;">  end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  45</span> <span style="color: #228B22; background: #FFFFFF;">  </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  46</span> <span style="color: #228B22; background: #FFFFFF;">  % Write RIFF chunk</span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">  70.8k/12.8k/29.8k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  47</span> <span style="color: #000000; background: #FFFFFF;">  WriteChunk('RIFF',aviobj.Sizes.riffsize,fid); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  70.8k/12.8k/29.8k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  48</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  70.8k/12.8k/29.8k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  49</span> <span style="color: #228B22; background: #FFFFFF;">  % Write AVI fourcc</span><br/></pre></td></tr><tr><a name="Line50"></a><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">    9.94k/96b/5.91k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  50</span> <span style="color: #000000; background: #FFFFFF;">  count = fwriteWithCheck(fid,'AVI ','char'); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">    9.94k/96b/5.91k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  51</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">    9.94k/96b/5.91k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  52</span> <span style="color: #228B22; background: #FFFFFF;">  % Write hdrl LIST</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">    24.7k/7.73k/17k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  53</span> <span style="color: #000000; background: #FFFFFF;">  WriteList('hdrl',aviobj.Sizes.hdrllist - 8,fid); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">    24.7k/7.73k/17k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  54</span> <span style="color: #228B22; background: #FFFFFF;">  </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">    24.7k/7.73k/17k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  55</span> <span style="color: #228B22; background: #FFFFFF;">  % Write avih chunk</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     624b/528b/160b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  56</span> <span style="color: #000000; background: #FFFFFF;">  WriteChunk('avih',aviobj.Sizes.avihsize -8,fid); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     624b/528b/160b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  57</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     624b/528b/160b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  58</span> <span style="color: #228B22; background: #FFFFFF;">  % Write main avi header</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">  95.6k/2.39k/33.3k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  59</span> <span style="color: #000000; background: #FFFFFF;">  WriteAVIH(fid, aviobj.MainHeader); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  95.6k/2.39k/33.3k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  60</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  95.6k/2.39k/33.3k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  61</span> <span style="color: #228B22; background: #FFFFFF;">  % Write strl LIST</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">  4.11k/6.52k/3.53k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  62</span> <span style="color: #000000; background: #FFFFFF;">  WriteList('strl',aviobj.Sizes.strllist -8,fid); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  4.11k/6.52k/3.53k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  63</span> <span style="color: #228B22; background: #FFFFFF;">  </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  4.11k/6.52k/3.53k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  64</span> <span style="color: #228B22; background: #FFFFFF;">  % Write strh chunk</span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     608b/512b/160b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  65</span> <span style="color: #000000; background: #FFFFFF;">  WriteChunk('strh',aviobj.Sizes.strhsize-8,fid); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     608b/512b/160b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  66</span> <span style="color: #228B22; background: #FFFFFF;">  </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     608b/512b/160b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  67</span> <span style="color: #228B22; background: #FFFFFF;">  % Write stream header</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">    55.2k/4.42k/46k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  68</span> <span style="color: #000000; background: #FFFFFF;">  WriteSTRH(fid,aviobj.StreamHeader); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">    55.2k/4.42k/46k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  69</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">    55.2k/4.42k/46k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  70</span> <span style="color: #228B22; background: #FFFFFF;">  % Write strf chunk</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     608b/512b/160b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  71</span> <span style="color: #000000; background: #FFFFFF;">  WriteChunk('strf',aviobj.Sizes.strfsize-8,fid); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     608b/512b/160b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  72</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     608b/512b/160b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  73</span> <span style="color: #228B22; background: #FFFFFF;">  % Write Bitmapheader</span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">  66.8k/17.1k/24.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  74</span> <span style="color: #000000; background: #FFFFFF;">  WriteBMPHeader(fid,aviobj.Bitmapheader); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  66.8k/17.1k/24.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  75</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  66.8k/17.1k/24.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  76</span> <span style="color: #228B22; background: #FFFFFF;">  % Write colormap </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">  66.8k/17.1k/24.5k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  77</span> <span style="color: #000000; background: #FFFFFF;">  if aviobj.Bitmapheader.biBitCount == 8 </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  66.8k/17.1k/24.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  78</span> <span style="color: #A0A0A0; background: #FFFFFF;">      WriteColormap(fid,aviobj.Bitmapheader.Colormap);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  66.8k/17.1k/24.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  79</span> <span style="color: #A0A0A0; background: #FFFFFF;">  end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  66.8k/17.1k/24.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  80</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">  66.8k/17.1k/24.5k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  81</span> <span style="color: #228B22; background: #FFFFFF;">  % Write stream name chunk and data</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     608b/512b/160b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  82</span> <span style="color: #000000; background: #FFFFFF;">  WriteChunk('strn',aviobj.Sizes.strnsize-8,fid); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">     608b/512b/160b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  83</span> <span style="color: #228B22; background: #FFFFFF;">  </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">    272b/4.28k/208b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  84</span> <span style="color: #000000; background: #FFFFFF;">  count = fwriteWithCheck(fid,aviobj.StreamName,'char'); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">   5.97k/272b/5.91k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  85</span> <span style="color: #000000; background: #FFFFFF;">  fwriteWithCheck(fid,0,'uchar'); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       400b/0b/400b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  86</span> <span style="color: #000000; background: #FFFFFF;">  if ~rem(count,2) </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       400b/0b/400b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  87</span> <span style="color: #A0A0A0; background: #FFFFFF;">    fwriteWithCheck(fid,0,'uchar');</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       400b/0b/400b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  88</span> <span style="color: #A0A0A0; background: #FFFFFF;">  end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       400b/0b/400b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  89</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">       400b/0b/400b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  90</span> <span style="color: #228B22; background: #FFFFFF;">  % Write movi list</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">  8.08k/6.52k/7.53k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  91</span> <span style="color: #000000; background: #FFFFFF;">  WriteList('movi',aviobj.Sizes.movilist-8 ,fid); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         96b/0b/96b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  92</span> <span style="color: #000000; background: #FFFFFF;">  moviListLoc = ftell(fid); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         96b/0b/96b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  93</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">         96b/0b/96b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  94</span> <span style="color: #228B22; background: #FFFFFF;">  % Open temp data and copy to avi file</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">     7.05k/0b/7.05k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  95</span> <span style="color: #000000; background: #FFFFFF;">  TempDataFile = fopen(aviobj.TempDataFile,'r','l'); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  96</span> <span style="color: #000000; background: #FFFFFF;">  if TempDataFile == -1 </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  97</span> <span style="color: #A0A0A0; background: #FFFFFF;">    error(message('MATLAB:audiovideo:aviclose:unableToOpenTempFile', aviobj.TempDataFile));</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0">  98</span> <span style="color: #A0A0A0; background: #FFFFFF;">  end</span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         12k/0b/12k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold">  99</span> <span style="color: #000000; background: #FFFFFF;">  offsets = zeros(1,aviobj.MainHeader.TotalFrames); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">         12k/0b/12k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 100</span> <span style="color: #000000; background: #FFFFFF;">  ChunkSizes =  zeros(1,aviobj.MainHeader.TotalFrames); </span><br/></pre></td></tr><tr><td></td><td><span style="color: #0000FF">      1 </span></td><td><span style="color: #20AF20">       160b/0b/160b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 101</span> <span style="color: #000000; background: #FFFFFF;">  for i = 1:aviobj.MainHeader.TotalFrames </span><br/></pre></td></tr><tr><a name="Line102"></a><td><span style="color: #FF0000">  0.01 </span></td><td><span style="color: #0000FF">    758 </span></td><td><span style="color: #20AF20">     29k/208b/4.62k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 102</span> <a name="Line102"></a><span style="color: #000000; background: #FFFFFF;">    chunkid = fread(TempDataFile,4,'char'); </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.01 </span></td><td><span style="color: #0000FF">    758 </span></td><td><span style="color: #20AF20">    560b/1.48k/560b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 103</span> <a name="Line103"></a><span style="color: #000000; background: #FFFFFF;">    ChunkSizes(i) = fread(TempDataFile,1,'uint32');  </span><br/></pre></td></tr><tr><td><span style="color: #FF0000"> 11.90 </span></td><td><span style="color: #0000FF">    758 </span></td><td><span style="color: #20AF20">    690m/640m/5.32m </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 104</span> <a name="Line104"></a><span style="color: #000000; background: #FFE2E2;">    data = fread(TempDataFile,ChunkSizes(i),'*uint8'); </span><br/></pre></td></tr><tr><td><span style="color: #FF0000">  0.03 </span></td><td><span style="color: #0000FF">    758 </span></td><td><span style="color: #20AF20">     128b/67.9k/32b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 105</span> <a name="Line105"></a><span style="color: #000000; background: #FFFFFF;">    if aviobj.Compression == 0 </span><br/></pre></td></tr><tr><a name="Line106"></a><td><span style="color: #FF0000"> 53.79 </span></td><td><span style="color: #0000FF">    758 </span></td><td><span style="color: #20AF20">   701k/43.1m/36.7k </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 106</span> <a name="Line106"></a><span style="color: #000000; background: #FF8080;">      [offsets(i), pad]  = WriteUncompressedData(fid, aviobj, data); </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">   701k/43.1m/36.7k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 107</span> <span style="color: #A0A0A0; background: #FFFFFF;">    elseif aviobj.Compression == 1</span><br/></pre></td></tr><tr><a name="Line108"></a><td></td><td></td><td><span style="color: #20AF20">   701k/43.1m/36.7k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 108</span> <span style="color: #A0A0A0; background: #FFFFFF;">      [offsets(i), pad] = WriteCompressedData(fid, aviobj, data);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">   701k/43.1m/36.7k </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 109</span> <span style="color: #A0A0A0; background: #FFFFFF;">    end</span><br/></pre></td></tr><tr><td><span style="color: #FF0000">&lt; 0.01 </span></td><td><span style="color: #0000FF">    757 </span></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #000000; font-weight: bold"> 110</span> <span style="color: #000000; background: #FFFFFF;">  end </span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 111</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 112</span> <span style="color: #228B22; background: #FFFFFF;">  % Write the idx1 chunk and data</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 113</span> <span style="color: #A0A0A0; background: #FFFFFF;">  WriteChunk('idx1',aviobj.Sizes.idx1size-8,fid);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 114</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 115</span> <span style="color: #A0A0A0; background: #FFFFFF;">  if aviobj.Compression == 1</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 116</span> <span style="color: #A0A0A0; background: #FFFFFF;">      idx1.ckid = '00dc';</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 117</span> <span style="color: #228B22; background: #FFFFFF;">  else</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 118</span> <span style="color: #A0A0A0; background: #FFFFFF;">      idx1.ckid = '00db';</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 119</span> <span style="color: #A0A0A0; background: #FFFFFF;">  end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 120</span> <span style="color: #A0A0A0; background: #FFFFFF;">  idx1.Flags = 16;</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 121</span> <span style="color: #A0A0A0; background: #FFFFFF;">  for i = 1:aviobj.MainHeader.TotalFrames</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 122</span> <span style="color: #A0A0A0; background: #FFFFFF;">    msgID = 'MATLAB:audiovideo:aviclose:unableToWriteIndexChunk';</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 123</span> <span style="color: #A0A0A0; background: #FFFFFF;">    msg = getString(message(msgID));</span><br/></pre></td></tr><tr><a name="Line124"></a><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 124</span> <span style="color: #A0A0A0; background: #FFFFFF;">    count = fwriteWithCheck(fid,idx1.ckid,'char',msgID,msg);</span><br/></pre></td></tr><tr><a name="Line125"></a><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 125</span> <span style="color: #A0A0A0; background: #FFFFFF;">    count = fwriteWithCheck(fid,idx1.Flags,'uint32',msgID,msg);</span><br/></pre></td></tr><tr><a name="Line126"></a><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 126</span> <span style="color: #A0A0A0; background: #FFFFFF;">    count = fwriteWithCheck(fid,offsets(i)-moviListLoc-4,'uint32',msgID,msg);</span><br/></pre></td></tr><tr><a name="Line127"></a><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 127</span> <span style="color: #A0A0A0; background: #FFFFFF;">    count = fwriteWithCheck(fid,ChunkSizes(i),'uint32',msgID,msg);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 128</span> <span style="color: #A0A0A0; background: #FFFFFF;">  end</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 129</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 130</span> <span style="color: #A0A0A0; background: #FFFFFF;">  fclose(TempDataFile);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 131</span> <span style="color: #A0A0A0; background: #FFFFFF;">  delete(aviobj.TempDataFile);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 132</span> <span style="color: #A0A0A0; background: #FFFFFF;">  fclose(fid);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 133</span> <span style="color: #228B22; background: #FFFFFF;">else</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 134</span> <span style="color: #A0A0A0; background: #FFFFFF;">  avi('close',aviobj.FileHandle);</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 135</span> <span style="color: #A0A0A0; background: #FFFFFF;">end %End of UNIX specific code</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 136</span> <span style="color: #A0A0A0; background: #FFFFFF;">aviobj.CurrentState = 'Closed';</span><br/></pre></td></tr><tr><td></td><td></td><td><span style="color: #20AF20">          0b/96b/0b </span></td><td class="leftAligned"><pre><span style="color: #A0A0A0"> 137</span> <span style="color: #A0A0A0; background: #FFFFFF;">return;</span><br/></pre></td></tr></table><p><p>Other subfunctions in this file are not included in this listing.</body></html>